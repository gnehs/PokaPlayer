(function(t){function e(e){for(var a,o,r=e[0],l=e[1],d=e[2],u=0,m=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(m.length)m.shift()();return n.push.apply(n,d||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},i={app:0},n=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var c=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0e0b":function(t,e,s){},"0e6f":function(t,e,s){"use strict";var a=s("c667"),i=s.n(a);i.a},"116c":function(t){t.exports=JSON.parse('{"title":"中文（台灣）","loading":"載入中...","header_welcome":"歡迎使用","header_version":"PokaPlayer {version}","checkUpdate_poka":"有新版本可供更新：{version}","checkUpdate_button":"更新","pingServer_title":"提示","pingServer_content":"伺服器重新啟動完畢！","pingServer_reconnect":"重新連接","home":"首頁","nowplaying":"現正播放","lrc":"歌詞","search":"搜尋","album":"專輯","folder":"資料夾","artist":"演出者","song":"歌曲","composer":"作曲者","playlist":"播放清單","settings":"設定","ok":"好","cancel":"取消","done":"完成","back":"返回","login":"登入","nothingFound":"找不到","requestError":"請求失敗，請再試一次","home_recentAlbums":"最近加入的專輯","home_pins":"釘選","home_netease":"網易雲音樂","home_hqPlaylist_netease":"精品清單","home_topPlaylist_netease":"熱門清單","home_dailyRecommend_netease":"每日推薦","app_waitForPlay":"佇列中未有歌曲","app_waitForPlay_description":"加入一些歌曲，或是點選底下的隨機播放","now_cleanSongs":"確定清除所有歌曲？","now_cleanSongs_description":"這將會清除列表中所有歌曲。","playlist_random":"隨機播放","lrc_search":"搜尋歌詞","lrc_noKeyword":"尚未輸入關鍵字","lrc_enter2search":"輸入完後按下 Enter 開始搜尋歌詞","lrc_notLoad":"不載入歌詞","lrc_notLoad_description":"點選清除目前的歌詞","lrc_noLyrics":"無歌詞","songAction_title":"歌曲操作","songAction_name":"歌曲名稱","songAction_artist":"演出者","songAction_album":"專輯","songAction_source":"來源","songAction_like":"收藏","songAction_like_success":"已收藏「{name}」","songAction_like_failed":"收藏或取消收藏「{name}」時發生了錯誤","songAction_unlike":"取消收藏","songAction_unlike_success":"已取消收藏「{name}」","songAction_unlike_failed":"取消收藏「{name}」時發生了錯誤","songAction_rating":"評等","songAction_rating0":"清除評等","songAction_rating4song":"為「{name}」評等","songAction_rating_success":"為「{name}」評等 {star} 星成功！","songAction_rating_failed":"為「{name}」評等 {star} 星失敗。","songAction_rating0_success":"為「{name}」清除評等成功！","songAction_rating0_failed":"為「{name}」清除評等失敗。","songAction_add2playlist":"加入到播放清單","songAction_add2playlist_songNotExist":"{source}","songAction_add2playlist_songExist":"{source} / 該歌曲已存在，點選來刪除","songAction_add2playlist_failed":"處理 {name} 時發生了錯誤","songAction_add2playlist_add_success":"已將 {name} 加入到 {playlist}","songAction_add2playlist_remove_success":"已將 {name} 從 {playlist} 刪除","album_total":"{songs} 首歌曲","albumsOfSameArtist":"來自相同演出者的其他專輯","addSong_total":"已添加 {total} 首歌","addSong_name":"已添加 {name}","moduleShowName_Netease":"網易雲音樂","moduleShowName_DSM":"DSM","sessionExpired":"Session 過期，請重新登入","add2nowPlaying":"將此頁歌曲加入到現正播放","pin_failed":"釘選失敗","unpin_failed":"取消釘選失敗","pin_album":"釘選此專輯","unpin_album":"取消釘選此專輯","pin_artist":"釘選該演出者","unpin_artist":"取消釘選該演出者","pin_composer":"釘選該作曲者","unpin_composer":"取消釘選該作曲者","pin_playlist":"釘選此播放清單","unpin_playlist":"取消釘選此播放清單","settings_dark":"夜間模式","settings_network":"網路","settings_network_description":"音質","settings_network_soundQuality":"音質","settings_network_soundQuality_Low":"低音質","settings_network_soundQuality_Med":"中等音質","settings_network_soundQuality_High":"高音質(建議)","settings_network_soundQuality_Ori":"原始音質","settings_network_soundQuality_Low_description":"128K，跟 YouTube 差不多的爛音質，在網路夭壽慢的情況下請選擇此選項","settings_network_soundQuality_Med_description":"音質只比 YouTube 好那麼一點點，可在 3G 網路下流暢的串流","settings_network_soundQuality_High_description":"音質較原始音質略差，可在 4G 網路下流暢的串流","settings_network_soundQuality_Ori_description":"在網路狀況許可下，可選擇此選項聆聽高音質音樂","settings_customize":"個人化","settings_customize_description":"自訂背景、其他細節設定","settings_customize_bg":"自訂背景","settings_customize_bg_link":"自訂連結","settings_lang":"語言","settings_lang_description":"設定您的 PokaPlayer 語言","settings_systemAndUpdate":"系統和更新","settings_systemAndUpdate_description":"更新 PokaPlayer、重新啟動","settings_about":"關於","settings_about_description":"PokaPlayer 相關訊息、錯誤回報等","settings_about_contributions":"貢獻者","settings_about_errorEeport":"錯誤回報","settings_account":"帳號","settings_logout":"登出","settings_system":"系統","settings_update":"軟體更新","settings_update_checking4updates":"正在檢查更新...","settings_update_latestVersion":"您的 PokaPlayer 已是最新版本","settings_update_update2":"更新至 {version}","settings_update_canUpdate2":"可更新至 {version}","settings_update_go2UpdatePage":"前往更新頁面","settings_update_srvRestart":"伺服器重新啟動","settings_update_reconnect":"重新連接","settings_update_initializing":"正在初始化...","settings_update_updating":"正在更新...","settings_update_git_fetch":"初始化完成","settings_update_git_reset":"更新檔下載完成","settings_update_git_api":"API 更新完成","settings_updateDialog_note":"注意：若您未開啟 Docker 自動重啟功能，您必須手動開啟 PokaPlayer","settings_updateDialog_note_dev":"若在開發機器上進行更新，<mark>可能導致 Git 爆炸</mark>","settings_updateDialog_title":"{version} 更新日誌","settings_restart":"重新啟動","settings_restarting":"正在重新啟動...","settings_restart_completed":"重新啟動完成！","settings_restartDialog_title":"確定要重新啟動嗎？","settingUser":{"title":"使用者","description":"檢視您的資料、修改密碼","name":"名稱","username":"使用者名稱","role":"權限","password":"密碼","passwordDescription":"輕觸此處來更改密碼","changeName":{"title":"更改名稱","placeholder":"輸入新的名稱","result":{"success":"名稱成功更改為 {name}","error":"名稱更改失敗"}},"changeUsername":{"title":"更改使用者名稱","placeholder":"輸入新的使用者名稱","result":{"success":"使用者名稱成功更改為 {name}，下次請用新的使用者名稱來登入","error":"使用者名稱更改失敗"}},"changePassword":{"title":"更改密碼","oldPassword":"舊密碼","newPassword":"新密碼","confirmPassword":"確認密碼","confirmPasswordHelperText":"再輸入一次您的新密碼","done":"更改密碼","result":{"inconsistent":"兩次密碼不一致","same":"密碼不可與舊密碼相同","success":"密碼更改成功","error":"密碼更改失敗"}}},"source":{"DSM":"DSM","Netease2":"網易雲音樂"},"install":{"title":"安裝嚮導","next":"下一步","done":"完成","enabled":"啟用","description":{"title":"說明","text":"本頁面將協助您進行初始設定，使 PokaPlayer 能夠連接至您的音樂服務，並開始享受音樂。<br>也可以參考 Repo 內的 <code>config-simple.json</code> 來設定，別忘了移除上頭的註解！"},"note":{"title":"注意","text":"請確認這些項目已開啟","docker":"已開啟 Docker 自動重啟功能","netease":{"title":"若您要使用網易雲服務","text":"<li>請先架設好 gnehs/neteasecloudmusicapi-docker</li><li>建議可設定好容器別名以方便連接</li>"},"dsm":{"title":"若您要使用 DSM 的 Audio Station","text":"<li>已安裝好並啟動 Audio Station</li><li>DSM 已建立一個供 PokaPlayer 存取的帳號，並建議不要給予過多的權限（請確認兩步驟驗證已關閉）</li>"}},"poka":{"login_password":"登入密碼","admin_password":"管理員密碼","please_enter_password":"請輸入密碼","note":"*請牢記您的密碼，若不慎遺失將無法復原<br>*請設定較強的密碼，像是 <code>correctcutebibibatterystaple</code> 之類由單字組成的密碼"},"module":"模組","dsm":{"dsm":"DSM","connect_to_dsm":"連接到 DSM","error":"無法連線至 DSM 或帳號密碼有誤"},"protocol":"通訊協定","host":"網域、IP 或別名","port":"端口","account":"帳號","password":"密碼","netease":{"netease":"網易雲音樂","connect_to_netease":"連接到 NeteaseCloudMusicApi","loginby":{"title":"E-mail 或 電話號碼","email":"E-mail","phone":"電話號碼"},"subscription":{"title":"訂閱歌單","topPlaylist":"網友精選碟歌單","dailyRecommendSongs":"每日推薦歌曲","dailyRecommendPlaylists":"每日推薦歌單","hqPlaylist":"精品歌單"},"error":"無法連線至網易雲或帳號密碼有誤"},"finish":{"title":"完成","text":"您可以在此備份目前的設定檔，以備不時之需<br>點擊下方「完成」來提交設定檔","download_config":"下載設定檔"},"state":{"done_title":"完成！","done_commit":"正在提交設定檔","done_restarting":"正在等待伺服器重啟，請勿離開本頁面","done_server_restarted":"伺服器重啟完成，請點擊下面按鈕重新載入頁面","poka_title":"PokaPlayer 已安裝完成","poka_description":"若要修改設定，請手動刪除目錄下的 config.json"}}}')},"16be":function(t,e,s){"use strict";var a=s("c6ed"),i=s.n(a);i.a},1744:function(t,e,s){"use strict";var a=s("85a3"),i=s.n(a);i.a},"1c1c":function(t,e,s){"use strict";var a=s("9f33"),i=s.n(a);i.a},"1e69":function(t){t.exports=JSON.parse('{"title":"English (US)","loading":"Loading...","header_welcome":"Welcome","header_version":"PokaPlayer {version}","checkUpdate_poka":"Update Available: {version}","checkUpdate_button":"Update","pingServer_title":"Hint","pingServer_content":"Server restarting success!","pingServer_reconnect":"Reconnect","home":"Home","nowplaying":"Now Playing","lrc":"Lyrics","search":"Search","album":"Albums","folder":"Folders","artist":"Artists","song":"Songs","composer":"Composers","playlist":"Playlists","settings":"Settings","ok":"OK","cancel":"Cancel","back":"Back","login":"Login","nothingFound":"Nothing found","requestError":"An error occurred while requesting, please try again","home_recentAlbums":"Recent added albums","home_pins":"Pins","home_netease":"Netease","home_hqPlaylist_netease":"HQ Playlist","home_topPlaylist_netease":"Top Playlist","home_dailyRecommend_netease":"Daily Recommend","app_waitForPlay":"No queued songs. ","app_waitForPlay_description":"You can add more songs, or press below to shuffle.","now_cleanSongs":"Clear all songs?","now_cleanSongs_description":"This will remove every song in the playlist.","playlist_random":"Shuffle","lrc_search":"Search lyrics","lrc_noKeyword":"Enter keyword to search","lrc_enter2search":"Press Enter key to start searching","lrc_notLoad":"Don\'t load lyrics","lrc_notLoad_description":"This will remove lyrics of the song now playing.","lrc_noLyrics":"No lyrics","songAction_title":"Actions","songAction_name":"Name","songAction_artist":"Artists","songAction_album":"Album","songAction_source":"Source","songAction_like":"Like","songAction_like_success":"Liked \\"{name}\\"","songAction_like_failed":"An error occurred while liking \\"{name}\\".","songAction_unlike":"Unlike","songAction_unlike_success":"Unliked \\"{name}\\"","songAction_unlike_failed":"An error occurred while unliking \\"{name}\\".","songAction_rating":"Rate","songAction_rating0":"Clear rating","songAction_rating4song":"Successfully rated for {name}","songAction_rating_success":"Rated {star} stars for \\"{name}\\".","songAction_rating_failed":"Rating {name} for {star} stars failed.","songAction_rating0_success":"Clear rating for {name} success!","songAction_rating0_failed":"Clear rating for {name} failed.","songAction_add2playlist":"Add to playlist","songAction_add2playlist_songNotExist":"{source}","songAction_add2playlist_songExist":"{source} / Song already added, click to delete","songAction_add2playlist_failed":"An error occured while processing {name}","songAction_add2playlist_add_success":"Added {name} to {playlist}","songAction_add2playlist_remove_success":"Removed {name} from {playlist}","album_total":"{songs} songs","albumsOfSameArtist":"Albums of the same artist","addSong_total":"{total} songs added","addSong_name":"Added {name}","moduleShowName_Netease":"Netease","moduleShowName_DSM":"DSM","sessionExpired":"Session expired, please log in again","add2nowPlaying":"Add this list to queue","pin_failed":"Failed to pin","unpin_failed":"Failed to unpin","pin_album":"Pin album","unpin_album":"Unpin album","pin_artist":"Pin artist","unpin_artist":"Unpin artist","pin_composer":"Pin composer","unpin_composer":"Unpin composer","pin_playlist":"Pin playlist","unpin_playlist":"Unpin playlist","settings_dark":"Night Mode","settings_network":"Network","settings_network_description":"Music quality","settings_network_soundQuality":"Music quality","settings_network_soundQuality_Low":"Low","settings_network_soundQuality_Med":"Medium","settings_network_soundQuality_High":"High","settings_network_soundQuality_Ori":"Original","settings_network_soundQuality_Low_description":"Only use when the internet is slow","settings_network_soundQuality_Med_description":"Able to stream smoothly under 3G network","settings_network_soundQuality_High_description":"Able to stream smoothly under 4G/LTE network","settings_network_soundQuality_Ori_description":"Uncompressed audio, only use when the internet is fast","settings_customize":"Customizations","settings_customize_description":"Custom background, details","settings_customize_bg":"Custom background","settings_customize_bg_link":"Custom link","settings_lang":"Language","settings_lang_description":"Set your PokaPlayer language","settings_systemAndUpdate":"System & update","settings_systemAndUpdate_description":"Update PokaPlayer, restart","settings_about":"About","settings_about_description":"Version, feedback","settings_about_contributions":"Contributions","settings_about_errorEeport":"Send feedback","settings_account":"Account","settings_logout":"Logout","settings_system":"System","settings_update":"Software update","settings_update_checking4updates":"Checking for updates...","settings_update_latestVersion":"Your PokaPlayer is up to date","settings_update_update2":"Update to {version}","settings_update_canUpdate2":"{version} is available","settings_update_Go2UpdatePage":"Go to update page","settings_update_srvRestart":"Restart server.","settings_update_reconnect":"Reconnect","settings_update_initializing":"Initializing...","settings_update_updating":"Updating...","settings_update_git_fetch":"Initialize complete.","settings_update_git_reset":"Update download complete.","settings_update_git_api":"API update complete.","settings_updateDialog_note":"Notice: If Docker auto-restart is disabled, you must start PokaPlayer manually.","settings_updateDialog_note_dev":"If you update on developing machine, <mark>it may cause Git to crash</mark>","settings_updateDialog_title":"{version} Release note","settings_restart":"Restart","settings_restarting":"Restarting...","settings_restart_completed":"Restart completed.","settings_restartDialog_title":"Are you sure to restart?","settingUser":{"title":"User","description":"View your profile, change your password","name":"Name","username":"Username","role":"Role","password":"Password","passwordDescription":"Tap here to change your password","changeName":{"title":"Change name","placeholder":"Enter a new name","result":{"success":"Name successfully changed to {name}","error":"Name change failed"}},"changeUsername":{"title":"Change username","placeholder":"Enter a new username","result":{"success":"Username successfully changed to {name}, please login with a new username next time","error":"Username change failed"}},"changePassword":{"title":"Change the password","oldPassword":"old password","newPassword":"new password","confirmPassword":"confirm password","confirmPasswordHelperText":"Enter your new password again","done":"change","result":{"inconsistent":"Two passwords are inconsistent","same":"Password cannot be the same as the old password","success":"Password changed successfully","error":"Password change failed"}}},"source":{"DSM":"DSM","Netease2":"Netease"},"install":{"title":"安裝嚮導","next":"下一步","done":"完成","enabled":"啟用","description":{"title":"說明","text":"本頁面將協助您進行初始設定，使 PokaPlayer 能夠連接至您的音樂服務，並開始享受音樂。<br>也可以參考 Repo 內的 <code>config-simple.json</code> 來設定，別忘了移除上頭的註解！"},"note":{"title":"注意","text":"請確認這些項目已開啟","docker":"已開啟 Docker 自動重啟功能","netease":{"title":"若您要使用網易雲服務","text":"<li>請先架設好 gnehs/neteasecloudmusicapi-docker</li><li>建議可設定好容器別名以方便連接</li>"},"dsm":{"title":"若您要使用 DSM 的 Audio Station","text":"<li>已安裝好並啟動 Audio Station</li><li>DSM 已建立一個供 PokaPlayer 存取的帳號，並建議不要給予過多的權限（請確認兩步驟驗證已關閉）</li>"}},"poka":{"login_password":"登入密碼","admin_password":"管理員密碼","please_enter_password":"請輸入密碼","note":"*請牢記您的密碼，若不慎遺失將無法復原<br>*請設定較強的密碼，像是 <code>correctcutebibibatterystaple</code> 之類由單字組成的密碼"},"module":"模組","dsm":{"dsm":"DSM","connect_to_dsm":"連接到 DSM","error":"無法連線至 DSM 或帳號密碼有誤"},"protocol":"通訊協定","host":"網域、IP 或別名","port":"端口","account":"帳號","password":"密碼","netease":{"netease":"網易雲音樂","connect_to_netease":"連接到 NeteaseCloudMusicApi","loginby":{"title":"E-mail 或 電話號碼","email":"E-mail","phone":"電話號碼"},"subscription":{"title":"訂閱歌單","topPlaylist":"網友精選碟歌單","dailyRecommendSongs":"每日推薦歌曲","dailyRecommendPlaylists":"每日推薦歌單","hqPlaylist":"精品歌單"},"error":"無法連線至網易雲或帳號密碼有誤"},"finish":{"title":"完成","text":"您可以在此備份目前的設定檔，以備不時之需<br>點擊下方「完成」來提交設定檔","download_config":"下載設定檔"},"state":{"done_title":"完成！","done_commit":"正在提交設定檔","done_restarting":"正在等待伺服器重啟，請勿離開本頁面","done_server_restarted":"伺服器重啟完成，請點擊下面按鈕重新載入頁面","poka_title":"PokaPlayer 已安裝完成","poka_description":"若要修改設定，請手動刪除目錄下的 config.json"}}}')},"23a9":function(t,e,s){"use strict";var a=s("5903"),i=s.n(a);i.a},2432:function(t,e,s){"use strict";var a=s("a58d"),i=s.n(a);i.a},"24b1":function(t,e,s){},"2c68":function(t,e,s){},3342:function(t,e,s){"use strict";var a=s("cd41"),i=s.n(a);i.a},"3d32":function(t,e,s){},"3f7d":function(t,e,s){"use strict";var a=s("c11a"),i=s.n(a);i.a},4549:function(t,e,s){"use strict";var a=s("e1e2"),i=s.n(a);i.a},"56d7":function(t,e,s){"use strict";s.r(e);var a={};s.r(a),s.d(a,"about",(function(){return ls})),s.d(a,"headerWrapper",(function(){return _s})),s.d(a,"pokaCard",(function(){return Ss})),s.d(a,"pokaCards",(function(){return Ns})),s.d(a,"pokaLoader",(function(){return Os})),s.d(a,"pinButton",(function(){return zs})),s.d(a,"playRandomButton",(function(){return Ks})),s.d(a,"pokaUpdate",(function(){return sa})),s.d(a,"parsePlaylists",(function(){return la})),s.d(a,"parseSongs",(function(){return _a})),s.d(a,"parseArtists",(function(){return wa})),s.d(a,"parseAlbums",(function(){return Sa})),s.d(a,"parseComposers",(function(){return Na})),s.d(a,"parseFolders",(function(){return Oa})),s.d(a,"parseMultiple",(function(){return za})),s.d(a,"infoHeader",(function(){return ws}));var i=s("9f61"),n=s.n(i);window._player=new n.a({container:document.getElementById("player")}),window._uuid=()=>{var t=Date.now();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var s=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?s:3&s|8).toString(16)}))},window._lyricReader=s("ef87"),window._lrc=new(s("ef87"))("[00:00.000]"),window._setting=(t,e)=>{let s=JSON.parse(localStorage.pokaSetting||"{}"),a={audioQuality:"High",headerBgSource:"https://i.imgur.com/IdbJiao.jpg",darkMode:!1,server:location.origin,password:""},i=navigator.language||navigator.userLanguage;switch(i){case"zh-TW":a.lang="zh_TW";break;case"zh-CN":a.lang="zh_CN";break;default:a.lang="en_US";break}return e?(s[t]=e,localStorage.pokaSetting=JSON.stringify(s),s[t]):s[t]?s[t]:a[t]?(s[t]=a[t]||"",localStorage.pokaSetting=JSON.stringify(s),s[t]):""},window._socket=io(window._setting("server")),window.scrollTo=(t,e,s)=>{let a=t.scrollTop,i=e-a,n=0,o=20,r=function(){n+=o;var e=Math.easeInOutQuad(n,a,i,s);t.scrollTop=e,n<s&&setTimeout(r,o)};r()},Math.easeInOutQuad=function(t,e,s,a){return t/=a/2,t<1?s/2*t*t+e:(t--,-s/2*(t*(t-2)-1)+e)};s("6176"),s("7463"),s("a2ef");var o=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-container"},[s("md-app",[s("md-app-toolbar",{staticClass:"md-primary",attrs:{"md-elevation":"2",id:"toolbar"}},[s("div",{staticClass:"md-toolbar-row"},[s("div",{staticClass:"md-toolbar-section-start"},[s("md-button",{staticClass:"md-icon-button menu",on:{click:t.toggleMenu}},[s("md-icon",[t._v("menu")])],1),s("span",{staticClass:"md-title"},[t._v("PokaPlayer")])],1),s("div",{staticClass:"md-toolbar-section-end"},[s("md-button",{staticClass:"md-icon-button",on:{click:t.switch_audio_order}},["list"===t.audio_order?s("md-icon",{staticClass:"outline-repeat"}):s("md-icon",{staticClass:"outline-shuffle"})],1)],1)])]),s("md-app-drawer",{attrs:{"md-active":t.menuVisible,"md-permanent":"clipped",id:"drawer"},on:{"update:mdActive":function(e){t.menuVisible=e},"update:md-active":function(e){t.menuVisible=e}}},[s("div",{attrs:{id:"pokaTitle"}},[s("span",[t._v("PokaPlayer")])]),s("md-divider"),s("md-list",[s("md-list-item",{attrs:{to:"/home"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-home"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("home")))])],1),s("md-list-item",{attrs:{to:"/now"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-playlist_play"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("nowplaying")))])],1),s("md-list-item",{attrs:{to:"/lyric"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-subtitles"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("lrc")))])],1),s("md-divider"),s("md-list-item",{attrs:{to:"/search"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-search"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("search")))])],1),s("md-list-item",{attrs:{to:"/album"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-album"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("album")))])],1),s("md-list-item",{attrs:{to:"/folder"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-folder"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("folder")))])],1),s("md-list-item",{attrs:{to:"/artist"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-mic_none"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("artist")))])],1),s("md-list-item",{attrs:{to:"/composer"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-music_note"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("composer")))])],1),s("md-list-item",{attrs:{to:"/playlist"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-format_list_bulleted"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("playlist")))])],1),s("md-divider"),s("md-list-item",{attrs:{to:"/setting"},on:{click:t.closeMenu}},[s("md-icon",{staticClass:"outline-settings"}),s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$t("settings")))])],1)],1)],1),s("md-app-content",[s("transition",{attrs:{name:t.transitionName,mode:"out-in"}},[s("router-view",{key:t.$route.path})],1)],1)],1),s("div",{staticClass:"bottom-player"},[s("div",{staticClass:"app-progress-bar"},[s("md-progress-bar",{staticClass:"md-accent",staticStyle:{width:"100%"},attrs:{"md-mode":"buffer","md-value":t.audio_currentTimePercent,"md-buffer":t.audio_bufferPercent}}),s("label",{staticClass:"pure-material-slider"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.audio_currentTimePercent,expression:"audio_currentTimePercent"}],attrs:{type:"range",min:"0",max:"100",step:"0.000001"},domProps:{value:t.audio_currentTimePercent},on:{input:t.audio_seek,__r:function(e){t.audio_currentTimePercent=e.target.value}}})])],1),s("div",{staticClass:"song-info"},[s("div",{staticClass:"left"},[s("div",{staticClass:"cover"},[s("img",{attrs:{src:t.audio_cover}}),s("md-button",{staticClass:"md-icon-button md-mini",on:{click:t.audio_toggle}},[t.audio_paused?s("md-icon",[t._v("play_arrow")]):s("md-icon",[t._v("pause")])],1)],1),s("div",{staticClass:"info",on:{click:function(e){return t.$router.push("/now"!=t.$route.path?"/now":"/lyric")}}},[s("div",{staticClass:"title"},[t._v(t._s(t.audio_title))]),s("div",{staticClass:"artist"},[t._v(t._s(t.audio_artist||t.$t("app_waitForPlay")))])])]),s("div",{staticClass:"center"},[s("span",{staticClass:"time"},[t._v(t._s(t.audio_currentTime))]),s("div",[s("md-button",{staticClass:"md-icon-button",on:{click:t.audio_previous}},[s("md-icon",{staticClass:"outline-skip_previous"})],1),s("md-tooltip",{directives:[{name:"show",rawName:"v-show",value:""!=t.audio_previous_name,expression:"audio_previous_name!=''"}],attrs:{"md-direction":"left"}},[t._v(t._s(t.audio_previous_name))])],1),s("md-button",{staticClass:"md-icon-button md-raised md-accent",on:{click:t.audio_toggle}},[t.audio_paused?s("md-icon",{staticClass:"outline-play_arrow"}):s("md-icon",{staticClass:"outline-pause"})],1),s("div",[s("md-button",{staticClass:"md-icon-button",on:{click:t.audio_next}},[s("md-icon",{staticClass:"outline-skip_next"})],1),s("md-tooltip",{directives:[{name:"show",rawName:"v-show",value:""!=t.audio_next_name,expression:"audio_next_name!=''"}],attrs:{"md-direction":"right"}},[t._v(t._s(t.audio_next_name))])],1),s("span",{staticClass:"time"},[t._v(t._s(t.audio_totalTime))])],1),t.audio_artist?s("div",{staticClass:"right"},[s("md-button",{staticClass:"md-icon-button",on:{click:t.switch_audio_order}},["list"===t.audio_order?s("md-icon",{staticClass:"outline-repeat"}):s("md-icon",{staticClass:"outline-shuffle"})],1),"/now"!=t.$route.path?s("md-button",{staticClass:"md-icon-button",attrs:{to:"/now"}},[s("md-icon",{staticClass:"outline-playlist_play"})],1):s("md-button",{staticClass:"md-icon-button",attrs:{to:"/lyric"}},[s("md-icon",{staticClass:"outline-subtitles"})],1)],1):s("div",{staticClass:"right"},[s("play-random-button")],1),t.audio_artist?s("div",{staticClass:"right-s"},[s("md-button",{staticClass:"md-icon-button",on:{click:t.audio_previous}},[s("md-icon",{staticClass:"outline-skip_previous"})],1),s("md-button",{staticClass:"md-icon-button md-raised md-accent",on:{click:t.audio_toggle}},[t.audio_paused?s("md-icon",{staticClass:"outline-play_arrow"}):s("md-icon",{staticClass:"outline-pause"})],1),s("md-button",{staticClass:"md-icon-button",on:{click:t.audio_next}},[s("md-icon",{staticClass:"outline-skip_next"})],1)],1):s("div",{staticClass:"right-s"},[s("play-random-button")],1)])]),s("md-snackbar",{attrs:{"md-position":"center","md-duration":1500,"md-active":t.snackbar.show,"md-persistent":""},on:{"update:mdActive":function(e){return t.$set(t.snackbar,"show",e)},"update:md-active":function(e){return t.$set(t.snackbar,"show",e)}}},[s("span",[t._v(t._s(t.snackbar.message))])])],1)},l=[],d=(s("2c68"),s("e53c"),s("f82c"),{name:"App",data:()=>({menuVisible:!1,audio_currentTimePercent:100,audio_bufferPercent:100,audio_currentTime:"0:00",audio_totalTime:"0:00",audio_paused:!0,audio_cover:_setting("headerBgSource"),audio_title:"PokaPlayer",audio_artist:null,audio_next_name:"",audio_previous_name:"",audio_order:_player.options.order,transitionName:"fade",scrollPositions:{},settings:{darkMode:window._setting("darkMode")},snackbar:{show:!1,message:"",timeout:null}}),created(){function t(){let t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)}o["default"].prototype.$snackbar=function(t="",e=1500){this.snackbar.message=t,this.snackbar.show=!0,clearTimeout(this.snackbar.timeout),this.snackbar.timeout=setTimeout(()=>this.snackbar.show=!1,e)},o["default"].prototype.$randomPlay=function(){let t=Math.random().toString(36).substring(7);this.axios(`/pokaapi/randomSongs?${t}`).then(t=>t.data.songs).then(t=>{this.$addSongs({songs:t})}).catch(t=>alert(`PokaPlayer Error\n${t}`))},o["default"].prototype.$addSongs=function({songs:t,index:e,clear:s=!0}){const a=window._setting("server"),i=window._setting("headerBgSource");let n=[];for(let o of t)n.push({url:a+o.url+"&songRes="+_setting("audioQuality").toLowerCase(),cover:o.cover&&o.cover.startsWith("http")?o.cover:o.cover?a+o.cover:i,name:o.name,artist:o.artist,artistId:o.artistId,album:o.album,albumId:o.albumId,id:o.id,source:o.source,uuid:_uuid()});s&&_player.list.clear(),_player.list.add(n),e&&"random"===_player.options.order?(_player.options.order="list",_player.list.switch(e),_player.options.order="random"):e&&_player.list.switch(e),_player.play()},sessionStorage.removeItem("login"),window.addEventListener("resize",t),t(),this.$router.beforeEach((t,e,s)=>{let a=t.meta.transitionName||e.meta.transitionName||"fade";if("slide"===a){const s=t.path.split("/").length,i=e.path.split("/").length;a=s<i?"slide-right":"slide-left",a=s==i?"fade":a}this.transitionName=a,this.getStatus();let i=document.querySelector(".md-app-content");i&&(this.scrollPositions[e.name]=i.scrollTop),s()}),window.addEventListener("popstate",()=>{let t=this.$router.history.current.name,e=document.querySelector(".md-app-content");if(e&&t in this.scrollPositions){let s=this.scrollPositions[t];setTimeout(()=>e.scrollTop=s,500)}}),this.axios.defaults.withCredentials=!0,this.axios.defaults.baseURL=_setting("server"),this.getStatus(!0),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",()=>_player.toggle()),navigator.mediaSession.setActionHandler("pause",()=>_player.pause()),navigator.mediaSession.setActionHandler("previoustrack",()=>_player.skipBack()),navigator.mediaSession.setActionHandler("nexttrack",()=>_player.skipForward())),setInterval(()=>{if(this.audio_paused=_player.paused,this.audio_order=_player.options.order,_player.list.audios.length>0){let t=_player.list.audios[_player.list.index],e=_player.audio.buffered,s=_player.audio.currentTime>1?e.end(e.length-1)/_player.audio.duration*100:0,a=_player.audio.currentTime/_player.audio.duration*100;if(this.audio_currentTimePercent=a,this.audio_bufferPercent=s,this.audio_paused=_player.paused,this.audio_title=t.name,this.audio_artist=t.artist,this.audio_cover=t.cover,this.audio_currentTime=this.secondToTime(_player.audio.currentTime||0),this.audio_totalTime=this.secondToTime(_player.audio.duration||0),this.audio_next_name=_player.list.audios[_player.nextIndex()].name,this.audio_previous_name=_player.list.audios[_player.prevIndex()].name,"mediaSession"in navigator){let e=document.querySelector(".cover img"),s=[{src:e.complete?t.cover:"/static/img/icons/512x512.png",sizes:e.complete?`${e.naturalWidth}x${e.naturalHeight}`:"512x512",type:"image/png"}];navigator.mediaSession.metadata=new MediaMetadata({title:t.name,artist:t.artist,artwork:s})}}else this.audio_currentTime="0:00",this.audio_totalTime="0:00",this.audio_currentTimePercent=100,this.audio_bufferPercent=100,this.audio_paused=_player.paused,this.audio_title="PokaPlayer",this.audio_artist=null,this.audio_cover=_setting("headerBgSource"),"mediaSession"in navigator&&(navigator.mediaSession.metadata=null)},400)},methods:{secondToTime(t){let e=Math.floor(t/60),s=Math.floor(t%60);return s=s<10?"0"+s:s,e+":"+s},audio_toggle(){_player.list.audios.length>0?(_player.toggle(),this.audio_paused=_player.paused):this.$randomPlay()},audio_next(){_player.skipForward(),_player.play()},audio_previous(){_player.skipBack(),_player.play()},audio_seek(){_player.seek(this.audio_currentTimePercent/100*_player.audio.duration)},closeMenu(){this.menuVisible=!1},toggleMenu(){this.menuVisible=!this.menuVisible},switch_audio_order(){_player.options.order="random"===_player.options.order?"list":"random",this.audio_order=_player.options.order},switchTheme(){this.settings.darkMode=!this.settings.darkMode,window._setting("darkMode",this.settings.darkMode),this.settings.darkMode?window._theme.switchToDark():window._theme.switchToLight()},getStatus(t=!1){sessionStorage.getItem("login")&&sessionStorage.setItem("login",!1),this.axios.get(_setting("server")+"/status/").then(async t=>{if(!t.data.install)return this.$router.push("/install");if(!t.data.login)return this.$router.push("/login");sessionStorage.setItem("login",!0);let e=await this.axios.get(_setting("server")+"/profile/");sessionStorage.setItem("login",JSON.stringify(e.data))})}}}),c=d,u=(s("5c0b"),s("c3c9"),s("2877")),m=Object(u["a"])(c,r,l,!1,null,"188ca4fb",null),p=m.exports,_=s("8c4f"),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("album")}}),t.data?s("poka-parse-albums",{attrs:{data:t.data.albums}}):s("poka-loader")],1)},h=[],v={name:"Album",created(){let t=_setting("server")+"/pokaapi/albums/";this.axios.get(t).then(t=>{this.data=t.data})},data:()=>({data:null,server:_setting("server")})},y=v,f=Object(u["a"])(y,g,h,!1,null,null,null),w=f.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{blurbg:!0,bg:t.cover||null}}),t.name?s("info-header",{attrs:{title:t.name,subtitle:t.artist,cover:t.cover,songs:t.songs.length}},[t.name?s("pin-button",{attrs:{source:t.$route.params.source,id:t.$route.params.id,type:"album",name:t.name,"btn-type":"icon-button"}}):t._e()],1):t._e(),t.songs?s("md-divider"):t._e(),t.songs?s("poka-parse-songs",{staticStyle:{margin:"16px 0"},attrs:{data:t.songs}}):t._e(),t.songs?t._e():s("poka-loader"),t.artistAlbums?s("md-divider"):t._e(),t.artistAlbums?s("h1",{staticClass:"md-title",staticStyle:{"padding-left":"0.5em"}},[t._v(t._s(t.$t("albumsOfSameArtist")))]):t._e(),t.artistAlbums?s("poka-parse-albums",{attrs:{data:t.artistAlbums}}):t._e()],1)},k=[],$={name:"AlbumSongs",async created(){let t=this.$route.params.source,e=this.$route.params.id;await this.axios.get(`${this.server}/pokaapi/album?moduleName=${encodeURIComponent(t)}&id=${encodeURIComponent(e)}`).then(t=>{this.songs=t.data.songs,this.name=t.data.name,this.artist=t.data.artist,this.cover=this.server+t.data.cover.replace(/'/,"\\'"),this.name=t.data.name});let s=this.artist,a=t,i=`${this.server}/pokaapi/artistAlbums/?moduleName=${encodeURIComponent(a)}&id=${encodeURIComponent(s)}`;this.axios.get(i).then(t=>{this.artistAlbums=t.data.albums.filter(t=>t.id!=e),this.artistAlbums.length<1&&(this.artistAlbums=null)})},data:()=>({data:null,cover:null,name:null,artist:null,songs:null,artistAlbums:null,server:_setting("server")})},P=$,C=Object(u["a"])(P,b,k,!1,null,null,null),S=C.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("artist")}}),t.data?s("poka-parse-artists",{attrs:{data:t.data.artists}}):s("poka-loader")],1)},A=[],D={name:"Artist",created(){this.axios.get(_setting("server")+"/pokaapi/artists/").then(t=>{this.data=t.data})},data:()=>({data:null,server:_setting("server")})},U=D,M=Object(u["a"])(U,x,A,!1,null,null,null),N=M.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.name,subtitle:t.$t("artist"),blurbg:!0,bg:t.server+t.cover||null}}),t.data?s("poka-parse-albums",{attrs:{data:t.data.albums}}):s("poka-loader"),t.name?s("pin-button",{attrs:{source:t.$route.params.source,id:t.$route.params.id,type:"artist",name:t.name}}):t._e()],1)},T=[],R={name:"ArtistAlbum",created(){let t="unknown"==this.$route.params.id?"":this.$route.params.id,e=this.$route.params.source,s=`${this.server}/pokaapi/artistAlbums/?moduleName=${encodeURIComponent(e)}&id=${encodeURIComponent(t)}`;this.axios.get(s).then(t=>{this.data=t.data}),this.axios.get(`/pokaapi/artist/?moduleName=${encodeURIComponent(e)}&id=${encodeURIComponent(t)}`).then(t=>{this.cover=t.data.cover,this.name=t.data.name})},data:()=>({data:null,cover:!1,name:"",server:_setting("server")})},I=R,E=Object(u["a"])(I,L,T,!1,null,null,null),O=E.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("composer")}}),t.data?s("poka-parse-composers",{attrs:{data:t.data.composers}}):s("poka-loader")],1)},j=[],Q={name:"Composer",created(){this.axios.get(_setting("server")+"/pokaapi/composers/").then(t=>{this.data=t.data})},data:()=>({data:null,server:_setting("server")})},V=Q,B=Object(u["a"])(V,H,j,!1,null,null,null),z=B.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.name,subtitle:t.$t("composer"),blurbg:!0,bg:t.server+t.cover||null}}),t.data?s("poka-parse-albums",{attrs:{data:t.data.albums}}):s("poka-loader"),t.name?s("pin-button",{attrs:{source:t.$route.params.source,id:t.$route.params.id,type:"composer",name:t.$route.params.id}}):t._e()],1)},F=[],G={name:"ComposerAlbum",created(){let t=this.$route.params.source,e="unknown"==this.$route.params.id?"":this.$route.params.id,s=`${this.server}/pokaapi/composerAlbums/?moduleName=${encodeURIComponent(t)}&id=${encodeURIComponent(e)}`;this.axios.get(s).then(t=>{this.data=t.data}),this.axios.get(`/pokaapi/composer/?moduleName=${encodeURIComponent(t)}&id=${encodeURIComponent(e)}`).then(t=>{this.cover=t.data.cover,this.name=t.data.name})},data:()=>({data:null,cover:!1,name:null,cover:null,server:_setting("server")})},J=G,W=Object(u["a"])(J,q,F,!1,null,null,null),K=W.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("folder")}}),s("md-button",{directives:[{name:"show",rawName:"v-show",value:!t.$route.meta.root,expression:"!$route.meta.root"}],staticClass:"md-raised md-primary",on:{click:t.goBack}},[s("md-icon",[t._v("arrow_back")]),t._v("\n\t\t"+t._s(t.$t("back"))+"\n\t")],1),t.data?s("poka-parse-folders",{attrs:{data:t.data.folders}}):t._e(),t.data?s("poka-parse-songs",{attrs:{data:t.data.songs}}):s("poka-loader")],1)},X=[],Z={name:"Folder",created(){let t=this.server+"/pokaapi/";if(this.$route.meta.root)t+="folders/";else{let e=encodeURIComponent(this.$route.params.source),s=encodeURIComponent(this.$route.params.id);t+=`folderFiles/?moduleName=${e}&id=${s}`}this.axios.get(t).then(t=>{this.data=t.data})},data:()=>({data:null,server:_setting("server")}),methods:{goBack(){window.history.length>1?this.$router.go(-1):this.$router.push("/folder")}}},tt=Z,et=Object(u["a"])(tt,Y,X,!1,null,null,null),st=et.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("header_welcome"),subtitle:t.$t("header_version",{version:t.poka_version})}}),s("poka-update"),t.data?s("poka-parse-multiple",{attrs:{data:t.data}}):s("poka-loader")],1)},it=[],nt={name:"Home",created(){this.axios.get(_setting("server")+"/pokaapi/home/").then(t=>{this.data=t.data}),this.axios.get(_setting("server")+"/status/").then(t=>{this.poka_version=t.data.version})},data:()=>({data:null,poka_version:null})},ot=nt,rt=Object(u["a"])(ot,at,it,!1,null,null,null),lt=rt.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.installed?s("md-empty-state",{attrs:{"md-icon":"done","md-label":t.$t("install.state.poka_title"),"md-description":t.$t("install.state.poka_description")}},[s("md-button",{staticClass:"md-primary md-raised",attrs:{to:"/"},domProps:{innerHTML:t._s(t.$t("home"))}})],1):s("div",[s("poka-header",{attrs:{title:t.$t("install.title"),subtitle:"PokaPlayer"}}),s("md-steppers",{directives:[{name:"show",rawName:"v-show",value:!t.step.server_restarting&&!t.step.server_restarted,expression:"!step.server_restarting&&!step.server_restarted"}],attrs:{"md-active-step":t.active,"md-vertical":"","md-linear":!0,"md-dynamic-height":!0},on:{"update:mdActiveStep":function(e){t.active=e},"update:md-active-step":function(e){t.active=e}}},[s("md-step",{attrs:{id:"step_description","md-label":t.$t("install.description.title"),"md-done":t.step.description},on:{"update:mdDone":function(e){return t.$set(t.step,"description",e)},"update:md-done":function(e){return t.$set(t.step,"description",e)}}},[s("h1",[t._v(t._s(t.$t("install.description.title")))]),s("p",{domProps:{innerHTML:t._s(t.$t("install.description.text"))}}),s("h1",{domProps:{innerHTML:t._s(t.$t("install.note.title"))}}),s("p",{domProps:{innerHTML:t._s(t.$t("install.note.text"))}}),s("ul",[s("li",{domProps:{innerHTML:t._s(t.$t("install.note.docker"))}}),s("li",{domProps:{innerHTML:t._s(t.$t("install.note.netease.title"))}}),s("ul",{domProps:{innerHTML:t._s(t.$t("install.note.netease.text"))}}),s("li",{domProps:{innerHTML:t._s(t.$t("install.note.dsm.title"))}}),s("ul",{domProps:{innerHTML:t._s(t.$t("install.note.dsm.text"))}})]),s("md-button",{staticClass:"md-raised md-primary",domProps:{innerHTML:t._s(t.$t("install.next"))},on:{click:function(e){return t.setDone("description","pokaplayer")}}})],1),s("md-step",{attrs:{id:"step_pokaplayer","md-label":"PokaPlayer","md-error":t.step.pokaplayer_err,"md-done":t.step.pokaplayer},on:{"update:mdDone":function(e){return t.$set(t.step,"pokaplayer",e)},"update:md-done":function(e){return t.$set(t.step,"pokaplayer",e)}}},[s("md-field",[s("label",{attrs:{for:"login-password"},domProps:{innerHTML:t._s(t.$t("install.poka.login_password"))}}),s("md-input",{attrs:{name:"login-password",id:"login-password"},model:{value:t.setting.PokaPlayer.password,callback:function(e){t.$set(t.setting.PokaPlayer,"password",e)},expression:"setting.PokaPlayer.password"}})],1),s("md-field",[s("label",{attrs:{for:"admin-password"},domProps:{innerHTML:t._s(t.$t("install.poka.admin_password"))}}),s("md-input",{attrs:{name:"admin-password",id:"admin-password"},model:{value:t.setting.PokaPlayer.adminPassword,callback:function(e){t.$set(t.setting.PokaPlayer,"adminPassword",e)},expression:"setting.PokaPlayer.adminPassword"}})],1),s("p",{domProps:{innerHTML:t._s(t.$t("install.poka.note"))}}),s("md-button",{staticClass:"md-raised md-primary",domProps:{innerHTML:t._s(t.$t("install.next"))},on:{click:function(e){return t.setDone("pokaplayer","module")}}})],1),s("md-step",{attrs:{id:"step_module","md-label":t.$t("install.module"),"md-error":t.step.module_err,"md-done":t.step.module},on:{"update:mdDone":function(e){return t.$set(t.step,"module",e)},"update:md-done":function(e){return t.$set(t.step,"module",e)}}},[s("md-card",[s("md-card-content",[s("h2",{domProps:{innerHTML:t._s(t.$t("install.enabled"))}}),s("md-divider"),s("md-switch",{model:{value:t.setting.DSM.enabled,callback:function(e){t.$set(t.setting.DSM,"enabled",e)},expression:"setting.DSM.enabled"}},[t._v(t._s(t.$t("install.dsm.dsm")))]),t.setting.DSM.enabled?s("div",[s("h2",{domProps:{innerHTML:t._s(t.$t("install.dsm.connect_to_dsm"))}}),s("md-divider"),s("div",{staticClass:"md-layout md-gutter"},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{attrs:{for:"DSM-protocol"},domProps:{innerHTML:t._s(t.$t("install.protocol"))}}),s("md-select",{attrs:{name:"DSM-protocol",id:"DSM-protocol"},model:{value:t.setting.DSM.protocol,callback:function(e){t.$set(t.setting.DSM,"protocol",e)},expression:"setting.DSM.protocol"}},[s("md-option",{attrs:{value:"http"}},[t._v("http://")]),s("md-option",{attrs:{value:"https"}},[t._v("https://")])],1)],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{domProps:{innerHTML:t._s(t.$t("install.host"))}}),s("md-input",{model:{value:t.setting.DSM.host,callback:function(e){t.$set(t.setting.DSM,"host",e)},expression:"setting.DSM.host"}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{domProps:{innerHTML:t._s(t.$t("install.port"))}}),s("md-input",{attrs:{type:"number"},model:{value:t.setting.DSM.port,callback:function(e){t.$set(t.setting.DSM,"port",e)},expression:"setting.DSM.port"}})],1)],1)]),s("h2",{domProps:{innerHTML:t._s(t.$t("login"))}}),s("md-divider"),s("div",{staticClass:"md-layout md-gutter"},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{domProps:{innerHTML:t._s(t.$t("install.account"))}}),s("md-input",{model:{value:t.setting.DSM.account,callback:function(e){t.$set(t.setting.DSM,"account",e)},expression:"setting.DSM.account"}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{domProps:{innerHTML:t._s(t.$t("install.password"))}}),s("md-input",{model:{value:t.setting.DSM.password,callback:function(e){t.$set(t.setting.DSM,"password",e)},expression:"setting.DSM.password"}})],1)],1)])],1):t._e()],1)],1),s("br"),s("md-card",[s("md-card-content",[s("h2",{domProps:{innerHTML:t._s(t.$t("install.enabled"))}}),s("md-divider"),s("md-switch",{model:{value:t.setting.Netease2.enabled,callback:function(e){t.$set(t.setting.Netease2,"enabled",e)},expression:"setting.Netease2.enabled"}},[t._v(t._s(t.$t("install.netease.netease")))]),t.setting.Netease2.enabled?s("div",[s("h2",{domProps:{innerHTML:t._s(t.$t("install.netease.connect_to_netease"))}}),s("md-divider"),s("div",{staticClass:"md-layout md-gutter"},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{attrs:{for:"netease-protocol"},domProps:{innerHTML:t._s(t.$t("install.protocol"))}}),s("md-select",{attrs:{name:"netease-protocol"},model:{value:t.netease.protocol,callback:function(e){t.$set(t.netease,"protocol",e)},expression:"netease.protocol"}},[s("md-option",{attrs:{value:"http://"}},[t._v("http://")]),s("md-option",{attrs:{value:"https://"}},[t._v("https://")])],1)],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{domProps:{innerHTML:t._s(t.$t("install.host"))}}),s("md-input",{model:{value:t.netease.host,callback:function(e){t.$set(t.netease,"host",e)},expression:"netease.host"}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{domProps:{innerHTML:t._s(t.$t("install.port"))}}),s("md-input",{attrs:{type:"number"},model:{value:t.netease.port,callback:function(e){t.$set(t.netease,"port",e)},expression:"netease.port"}})],1)],1)]),s("h2",{domProps:{innerHTML:t._s(t.$t("install.account"))}}),s("div",{staticClass:"md-layout md-gutter"},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{attrs:{for:"neteaseloginby"},domProps:{innerHTML:t._s(t.$t("install.netease.loginby.title"))}}),s("md-select",{attrs:{name:"neteaseloginby"},model:{value:t.netease.loginby,callback:function(e){t.$set(t.netease,"loginby",e)},expression:"netease.loginby"}},[s("md-option",{attrs:{value:"email"}},[t._v(t._s(t.$t("install.netease.loginby.email")))]),s("md-option",{attrs:{value:"phone"}},[t._v(t._s(t.$t("install.netease.loginby.phone")))])],1)],1)],1),s("div",{staticClass:"md-layout-item"},["email"==t.netease.loginby?s("md-field",[s("label",{domProps:{innerHTML:t._s(t.$t("install.netease.loginby.email"))}}),s("md-input",{model:{value:t.setting.Netease2.login.email,callback:function(e){t.$set(t.setting.Netease2.login,"email",e)},expression:"setting.Netease2.login.email"}})],1):s("md-field",[s("label",{domProps:{innerHTML:t._s(t.$t("install.netease.loginby.phone"))}}),s("md-input",{model:{value:t.setting.Netease2.login.phone,callback:function(e){t.$set(t.setting.Netease2.login,"phone",e)},expression:"setting.Netease2.login.phone"}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{domProps:{innerHTML:t._s(t.$t("install.password"))}}),s("md-input",{model:{value:t.setting.Netease2.login.password,callback:function(e){t.$set(t.setting.Netease2.login,"password",e)},expression:"setting.Netease2.login.password"}})],1)],1)]),s("md-divider"),s("h2",{domProps:{innerHTML:t._s(t.$t("install.netease.subscription.title"))}}),s("md-divider"),s("md-switch",{model:{value:t.setting.Netease2.topPlaylist.enabled,callback:function(e){t.$set(t.setting.Netease2.topPlaylist,"enabled",e)},expression:"setting.Netease2.topPlaylist.enabled"}},[t._v(t._s(t.$t("install.netease.subscription.topPlaylist")))]),s("md-switch",{model:{value:t.setting.Netease2.dailyRecommendSongs.enabled,callback:function(e){t.$set(t.setting.Netease2.dailyRecommendSongs,"enabled",e)},expression:"setting.Netease2.dailyRecommendSongs.enabled"}},[t._v(t._s(t.$t("install.netease.subscription.dailyRecommendSongs")))]),s("md-switch",{model:{value:t.setting.Netease2.dailyRecommendPlaylists.enabled,callback:function(e){t.$set(t.setting.Netease2.dailyRecommendPlaylists,"enabled",e)},expression:"setting.Netease2.dailyRecommendPlaylists.enabled"}},[t._v(t._s(t.$t("install.netease.subscription.dailyRecommendPlaylists")))]),s("md-switch",{model:{value:t.setting.Netease2.hqPlaylist.enabled,callback:function(e){t.$set(t.setting.Netease2.hqPlaylist,"enabled",e)},expression:"setting.Netease2.hqPlaylist.enabled"}},[t._v(t._s(t.$t("install.netease.subscription.hqPlaylist")))])],1):t._e()],1)],1),s("br"),s("md-button",{staticClass:"md-raised md-primary",domProps:{innerHTML:t._s(t.$t("install.done"))},on:{click:function(e){return t.setDone("module","done")}}})],1),s("md-step",{attrs:{id:"step_done","md-label":t.$t("install.finish.title"),"md-done":t.step.done},on:{"update:mdDone":function(e){return t.$set(t.step,"done",e)},"update:md-done":function(e){return t.$set(t.step,"done",e)}}},[s("p",{domProps:{innerHTML:t._s(t.$t("install.finish.text"))}}),s("md-button",{staticClass:"md-raised md-primary",domProps:{innerHTML:t._s(t.$t("install.done"))},on:{click:function(e){t.setDone("done"),t.checkRestart()}}}),s("md-button",{staticClass:"md-primary",domProps:{innerHTML:t._s(t.$t("install.finish.download_config"))},on:{click:t.downloadSetting}})],1)],1),t.step.server_restarting?s("md-empty-state",{attrs:{"md-icon":"done","md-label":t.$t("install.state.done_title"),"md-description":t.step.server_restarting_description}},[s("md-progress-spinner",{attrs:{"md-diameter":30,"md-stroke":3,"md-mode":"indeterminate"}})],1):t._e(),t.step.server_restarted?s("md-empty-state",{attrs:{"md-icon":"done","md-label":t.$t("install.state.done_title"),"md-description":t.$t("install.state.done_server_restarted")}},[s("md-button",{staticClass:"md-primary md-raised",attrs:{to:"/"},domProps:{innerHTML:t._s(t.$t("install.done"))}})],1):t._e()],1)},ct=[],ut={name:"Install",data:()=>({active:"step_description",installed:!1,step:{description:!1,pokaplayer:!1,pokaplayer_err:null,module:!1,module_err:null,done:!1,server_restarting:!1,server_restarting_description:"",server_restarted:!1},netease:{protocol:"",host:"netease",port:443,loginby:"email"},setting:{PokaPlayer:{adminPassword:null,password:null,passwordSwitch:!0,sessionSecret:Math.random().toString(36).substring(7),instantUpgradeProcess:!0,debug:!1},DSM:{enabled:!0,protocol:null,host:"localhost",port:5e3,account:null,password:null},Netease2:{enabled:!0,server:null,isPremium:!0,topPlaylist:{enabled:!0,category:"ACG",limit:5,order:"hot",image:"/img/topPlaylist.png"},dailyRecommendSongs:{enabled:!0,image:"/img/dailyRecommendSongs.png"},dailyRecommendPlaylists:{enabled:!0,image:"/img/dailyRecommendPlaylists.png"},hqPlaylist:{enabled:!0,category:"ACG",limit:20,image:"/img/hqPlaylist.png"},login:{email:null,phone:null,password:null}}}}),created(){this.axios.get(_setting("server")+"/status/").then(t=>{this.installed=t.data.install}),this.server_restarting_description=this.$t("install.state.done_commit")},methods:{setDone(t,e){if(this.step.pokaplayer_err=null,"pokaplayer"==t){if(!this.setting.PokaPlayer.password||!this.setting.PokaPlayer.adminPassword)return this.step.pokaplayer_err=this.$t("install.poka.please_enter_password"),alert(this.$t("install.poka.please_enter_password"));this.step.pokaplayer_err=null,this.step[t]=!0}else{if("module"==t)return this.step.module_err=null,this.setting.Netease2.server=this.netease.protocol+this.netease.host+":"+this.netease.port+"/",this.checkConnection();this.step[t]=!0}e&&(this.active="step_"+e)},async checkConnection(){let t,e;try{if(t=!this.setting.DSM.enabled||(await this.axios.post("/installapi/dsm",this.setting.DSM)).data,e=!this.setting.Netease2.enabled||(await this.axios.post("/installapi/netease2",this.setting.Netease2)).data,t&&"error"!=t&&e&&"error"!=e)this.step.module=!0,this.active="step_done";else{let s=[];("error"==t||!t)&&s.push(this.$t("install.dsm.error")),("error"==e||!e)&&s.push(this.$t("install.netease.error")),this.step.module_err=s.join(", "),alert(s.join(", "))}}catch(s){this.step.module_err=s,console.error("e",s)}},async checkRestart(){this.step.server_restarting=!0;let t=(await this.axios.post("/installapi/config",this.setting)).data;"done"==t&&(this.step.server_restarting_description=this.$t("install.state.done_restarting")),window._socket.on("hello",()=>{this.step.server_restarting=!1,this.step.server_restarted=!0})},downloadSetting(){let t=new Blob([JSON.stringify(this.setting,null,"\t")],{type:"application/json"}),e=URL.createObjectURL(t),s=document.createElement("a");s.href=e,s.setAttribute("download","config.json"),document.body.appendChild(s),s.click()}}},mt=ut,pt=Object(u["a"])(mt,dt,ct,!1,null,null,null),_t=pt.exports,gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"md-layout",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("md-card",{staticClass:"md-layout-item"},[s("md-card-media-cover",[s("md-card-media",{staticClass:"card-banner",attrs:{"md-ratio":"16:9"}},[s("img",{staticClass:"header-img",attrs:{src:t.headerImg}})]),s("md-card-area",[s("md-card-header",[s("span",{staticClass:"md-title"},[t._v("PokaPlayer")])])],1)],1),s("md-card-content",[s("md-field",[t.serverError?s("md-icon",{staticClass:"md-accent"},[t._v("warning")]):s("md-icon",{staticClass:"md-accent"},[t._v("link")]),s("label",{attrs:{for:"server"}},[t._v("Server")]),s("md-input",{attrs:{type:"text",name:"server",disabled:t.logining},model:{value:t.server,callback:function(e){t.server="string"===typeof e?e.trim():e},expression:"server"}})],1),s("md-field",[s("md-icon",{staticClass:"md-accent"},[t._v("vpn_key")]),s("label",{attrs:{for:"username"}},[t._v("Username")]),s("md-input",{attrs:{type:"text",name:"username",disabled:t.logining},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),s("md-field",[t.passwordError?s("md-icon",{staticClass:"md-accent"},[t._v("warning")]):s("md-icon",{staticClass:"md-accent"},[t._v("vpn_key")]),s("label",{attrs:{for:"password"}},[t._v("Password")]),s("md-input",{attrs:{type:"password",name:"password",disabled:t.logining},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t.logining?s("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):t._e(),s("md-card-actions",[s("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit",disabled:t.logining}},[t._v(t._s(t.$t("login")))])],1)],1)],1)},ht=[],vt=(s("3022"),{name:"Login",data:()=>({remember:!1,logining:!1,server:null,serverError:null,password:null,username:null,passwordError:null,headerImg:null}),created(){this.remember=!0,this.password=_setting("password"),this.username=_setting("username"),this.server=_setting("server"),this.headerImg=_setting("headerBgSource")},methods:{login(){if(this.passwordError=null,this.serverError=null,this.server=this.server.replace(/\/$/,""),!this.password||!this.server)return this.password||(this.passwordError="Wrong password"),void(this.server||(this.serverError="Unable to connect to server"));this.logining=!0,this.axios({method:"post",url:this.server+"/login/",data:{password:this.password,username:this.username},config:{headers:{"Content-Type":"multipart/form-data"}}}).catch(t=>this.serverError="Unable to connect to server").then(t=>t.data).then(async t=>{if(this.logining=!1,!t.success)return this.passwordError="Wrong password",this.password="",!1;{_setting("password",this.password),_setting("username",this.username),_setting("server",this.server);let t=(await this.axios(this.server+"/setting/")).data;for(let e of Object.keys(t.settings))console.log(e),_setting(e,t.settings[e]);this.$router.push("/"),window.location.reload()}})}}}),yt=vt,ft=(s("16be"),Object(u["a"])(yt,gt,ht,!1,null,"2acf57b2",null)),wt=ft.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{blurbg:!0,bg:t.audio_cover}}),s("div",{staticStyle:{position:"relative"}},[t.audio_queue.length>0?s("transition-group",{staticClass:"poka list",attrs:{name:"songlist",tag:"div"}},t._l(t.audio_queue,(function(e,a){return s("div",{key:e.uuid,staticClass:"item",class:{active:a==t.audio_index}},[s("md-ripple",[s("div",{staticClass:"content",on:{click:function(e){return t.playSong(a)}}},[s("md-avatar",[s("img",{attrs:{src:e.cover,alt:"cover"}})]),s("div",{staticClass:"header"},[s("div",{staticClass:"title t-ellipsis"},[t._v(t._s(e.name))]),s("div",{staticClass:"t-ellipsis"},[t._v(t._s(e.artist))])])],1),s("div",{staticClass:"action"},[s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(s){return t.moreDialog(e)}}},[s("md-icon",{staticClass:"outline-more_horiz"})],1),s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(e){return t.removeSong(a)}}},[s("md-icon",{staticClass:"outline-close"})],1)],1)])],1)})),0):s("md-empty-state",{attrs:{"md-icon":"queue_music","md-label":t.$t("app_waitForPlay"),"md-description":t.$t("app_waitForPlay_description")}},[s("play-random-button")],1)],1),t.audio_queue.length>0?s("md-speed-dial",{staticClass:"md-bottom-right"},[s("md-speed-dial-target",{on:{click:t.audio_clean}},[s("md-icon",{staticClass:"outline-clear_all"})],1)],1):t._e(),s("md-dialog",{attrs:{"md-active":t.moreDialogShow,"md-fullscreen":!1},on:{"update:mdActive":function(e){t.moreDialogShow=e},"update:md-active":function(e){t.moreDialogShow=e}}},[s("md-dialog-title",[t._v(t._s(t.$t("songAction_title")))]),s("md-dialog-content",{staticStyle:{"min-width":"400px"}},[s("div",{staticClass:"poka list"},[s("div",{staticClass:"item disabled"},[s("md-ripple",[s("div",{staticClass:"content"},[s("md-avatar",[s("md-icon",{staticClass:"outline-turned_in_not"})],1),s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("songAction_like")))])])],1)])],1),s("div",{staticClass:"item disabled"},[s("md-ripple",[s("div",{staticClass:"content"},[s("md-avatar",[s("md-icon",{staticClass:"outline-star"})],1),s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("songAction_rating")))])])],1)])],1),s("div",{staticClass:"item disabled"},[s("md-ripple",[s("div",{staticClass:"content"},[s("md-avatar",[s("md-icon",{staticClass:"outline-playlist_add"})],1),s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("songAction_add2playlist")))])])],1)])],1),t.moreDialogTemp?s("div",{staticClass:"item"},[s("div",{staticClass:"content"},[s("md-avatar",[s("md-icon",{staticClass:"outline-music_note"})],1),s("div",{staticClass:"header"},[s("div",{staticClass:"title t-ellipsis"},[t._v(t._s(t.moreDialogTemp.name))]),s("div",{staticClass:"t-ellipsis"},[t._v(t._s(t.$t("songAction_name")))])])],1)]):t._e(),t.moreDialogTemp?s("div",{staticClass:"item",on:{click:t.moreDialog_goto_artist}},[s("md-ripple",[s("div",{staticClass:"content"},[s("md-avatar",[s("md-icon",{staticClass:"outline-mic_none"})],1),s("div",{staticClass:"header"},[s("div",{staticClass:"title t-ellipsis"},[t._v(t._s(t.moreDialogTemp.artist))]),s("div",{staticClass:"t-ellipsis"},[t._v(t._s(t.$t("songAction_artist")))])])],1)])],1):t._e(),t.moreDialogTemp?s("div",{staticClass:"item",on:{click:t.moreDialog_goto_album}},[s("md-ripple",[s("div",{staticClass:"content"},[s("md-avatar",[s("md-icon",{staticClass:"outline-album"})],1),s("div",{staticClass:"header"},[s("div",{staticClass:"title t-ellipsis"},[t._v(t._s(t.moreDialogTemp.album))]),s("div",{staticClass:"t-ellipsis"},[t._v(t._s(t.$t("songAction_album")))])])],1)])],1):t._e(),t.moreDialogTemp?s("div",{staticClass:"item"},[s("div",{staticClass:"content"},[s("md-avatar",[s("md-icon",{staticClass:"outline-cloud"})],1),s("div",{staticClass:"header"},[s("div",{staticClass:"title t-ellipsis"},[t._v(t._s(t.$t("source."+t.moreDialogTemp.source)))]),s("div",{staticClass:"t-ellipsis"},[t._v(t._s(t.$t("songAction_source")))])])],1)]):t._e()])]),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:function(e){t.moreDialogShow=!1}}},[t._v(t._s(t.$t("back")))])],1)],1)],1)},kt=[],$t={name:"NowPlaying",data:()=>({server:_setting("server"),defaultCover:_setting("headerBgSource"),audio_paused:!0,audio_cover:_setting("headerBgSource"),audio_queue:null,audio_index:-1,audio_title:"PokaPlayer",audio_artist:null,audio_order:_player.options.order,audio_uuid:":D",NowPlaying_updatePlayer:null,moreDialogShow:!1,moreDialogTemp:null}),created(){this.updatePlayer(),this.startUpdatePlayer()},destroyed(){this.stopUpdatePlayer()},methods:{startUpdatePlayer(){this.NowPlaying_updatePlayer=setInterval(()=>this.updatePlayer(),400)},stopUpdatePlayer(){this.NowPlaying_updatePlayer&&clearInterval(this.NowPlaying_updatePlayer)},updatePlayer(){if(this.audio_queue=_player.list.audios,this.audio_paused=_player.paused,this.audio_order=_player.options.order,_player.list.audios.length>0){let t=this.audio_uuid;this.audio_index=_player.list.index,this.audio_uuid=_player.list.audios[this.audio_index].uuid,this.audio_cover=_player.list.audios[this.audio_index].cover,this.audio_title=_player.list.audios[this.audio_index].name,this.audio_artist=_player.list.audios[this.audio_index].artist,t!=this.audio_uuid&&this.$nextTick(()=>{let t=document.querySelector(".poka.list > .active");if(t){let e=t.offsetTop-.5*document.querySelector("main").clientHeight+.75*t.clientHeight;window.scrollTo(document.querySelector(".md-app-content"),e,200)}})}else this.audio_cover=_setting("headerBgSource")},secondToTime(t){let e=Math.floor(t/60),s=Math.floor(t%60);return s=s<10?"0"+s:s,e+":"+s},playSong(t){_player.list.switch(t),_player.play(),this.updatePlayer()},removeSong(t){_player.list.remove(t),this.updatePlayer()},audio_toggle(){_player.toggle(),this.audio_paused=_player.paused},audio_clean(){_player.list.clear()},switch_audio_order(){_player.options.order="random"===_player.options.order?"list":"random",this.audio_order=_player.options.order},moreDialog(t){this.moreDialogTemp=t,this.moreDialogShow=!0},moreDialog_goto_album(){let t=this.moreDialogTemp;t&&t.albumId&&(this.moreDialogShow=!1,this.$nextTick(()=>{this.$router.push(`/album/songs/${encodeURIComponent(t.source)}/${encodeURIComponent(t.albumId)}`)}))},moreDialog_goto_artist(){let t=this.moreDialogTemp;t&&t.artistId&&(this.moreDialogShow=!1,this.$nextTick(()=>{this.$router.push(`/artist/${encodeURIComponent(t.source)}/${encodeURIComponent(t.artistId)}`)}))}}},Pt=$t,Ct=(s("0e6f"),Object(u["a"])(Pt,bt,kt,!1,null,"fe178c26",null)),St=Ct.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-empty-state",{attrs:{"md-icon":"clear","md-label":t.$t("nothingFound")}},[s("md-button",{staticClass:"md-primary md-outlined",attrs:{to:"/"}},[t._v(t._s(t.$t("home")))])],1)},At=[],Dt={name:"Notfound"},Ut=Dt,Mt=Object(u["a"])(Ut,xt,At,!1,null,null,null),Nt=Mt.exports,Lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("playlist")}}),t.data?s("poka-parse-playlists",{attrs:{data:t.data.playlists}}):s("poka-loader")],1)},Tt=[],Rt={name:"Playlist",created(){this.axios.get(_setting("server")+"/pokaapi/playlists/").then(t=>{this.data=t.data})},data:()=>({data:null,server:_setting("server")})},It=Rt,Et=Object(u["a"])(It,Lt,Tt,!1,null,null,null),Ot=Et.exports,Ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{blurbg:!0,bg:t.cover}}),s("info-header",{attrs:{title:t.title||t.$t("loading"),subtitle:t.$t("playlist"),cover:t.cover,songs:t.data.songs.length||0}}),s("md-divider"),t.data?s("poka-parse-songs",{attrs:{data:t.data.songs}}):s("poka-loader"),t.title?s("pin-button",{attrs:{source:t.$route.params.source,id:t.$route.params.id,type:"playlist",name:t.title}}):t._e()],1)},jt=[],Qt={name:"PlaylistSongs",created(){let t=encodeURIComponent(this.$route.params.source),e=encodeURIComponent(this.$route.params.id),s=this.server;this.axios.get(`${s}/pokaapi/playlistSongs/?moduleName=${t}&id=${e}`).then(t=>{this.data=t.data,this.title=this.data.playlists[0].name,this.cover=this.data.playlists[0].image?this.server+this.data.playlists[0].image:this.cover})},data:()=>({data:null,title:null,cover:_setting("headerBgSource"),server:_setting("server")})},Vt=Qt,Bt=Object(u["a"])(Vt,Ht,jt,!1,null,null,null),zt=Bt.exports,qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"lyric",class:{lyricTranslated:t.lyricTranslated},on:{dblclick:t.openLyricDialog}},[t.lyric.length>1?s("div",t._l(t.lyric,(function(e,a){return s("p",{key:a,class:{focus:a==t.lyricFocus}},[t._v(t._s(e.text))])})),0):t.lyricSearching?s("md-empty-state",{attrs:{"md-icon":"subtitles","md-label":t.$t("loading")}}):s("md-empty-state",{attrs:{"md-icon":"subtitles","md-label":t.$t("lrc_noLyrics")}},[s("md-button",{staticClass:"md-primary md-outlined",on:{click:function(e){t.showLyricDialog=!0}}},[t._v(t._s(t.$t("lrc_search")))])],1)],1),s("md-dialog",{attrs:{"md-active":t.showLyricDialog,"md-fullscreen":!1},on:{"update:mdActive":function(e){t.showLyricDialog=e},"update:md-active":function(e){t.showLyricDialog=e}}},[s("md-dialog-title",[t._v(t._s(t.$t("lrc_search")))]),s("md-dialog-content",{staticStyle:{"max-width":"100vw"}},[s("md-list",{staticClass:"md-double-line"},[s("md-list-item",{on:{click:function(e){t.loadLrc("[00:00.000]",!0),t.showLyricDialog=!1}}},[s("md-icon",[t._v("close")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("lrc_notLoad")))]),s("span",[t._v(t._s(t.$t("lrc_notLoad_description")))])])],1)],1),t.lyricSearching?s("poka-loader"):s("md-list",{staticClass:"md-triple-line",staticStyle:{overflow:"hidden"}},t._l(t.lyricSearchResult,(function(e,a){return s("md-list-item",{key:a,on:{click:function(s){t.loadLrc(e.lyric,!0),t.showLyricDialog=!1}}},[s("md-icon",[t._v("subtitles")]),s("div",{staticClass:"md-list-item-text t-ellipsis"},[s("span",{staticClass:"t-ellipsis"},[t._v(t._s(e.name)+" ／ "+t._s(e.artist))]),s("span",{staticClass:"t-ellipsis"},[t._v(t._s(e.nowLyric))]),s("span",{staticClass:"t-ellipsis"},[t._v(t._s(e.nowLyricT))])])],1)})),1)],1),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:function(e){t.showLyricDialog=!1}}},[t._v(t._s(t.$t("cancel")))])],1)],1)],1)},Ft=[],Gt={name:"Lyrics",data:()=>({audio_title:null,audio_artist:null,showLyricDialog:!1,lyric:[],lyricFocus:0,lyricSearching:!0,lyricSearchResult:null,lyricTranslated:!1,Lyric_Update:null}),created(){this.updateLyric(),this.startUpdateLyric()},destroyed(){this.stopUpdateLyric()},watch:{showLyricDialog(){this.updateSearchLyric()}},methods:{startUpdateLyric(){this.Lyric_Update=setInterval(()=>this.updateLyric(),300)},stopUpdateLyric(){this.Lyric_Update&&clearInterval(this.Lyric_Update)},openLyricDialog(){this.showLyricDialog=!0;let t=_player.list.audios[_player.list.index];this.lyricSearchResult||this.getLyricByKeyword(t.name,t.artist,!1)},updateLyric(){this.updateSearchLyric();let t=_player.list.audios[_player.list.index];if(_player.list.audios.length>0){if(this.audio_title!=t.name)window._lrc.load("[00:00.000]"),this.lyricFocus=0,this.lyricSearching=!0,this.lyricSearchResult=null,this.getLyric(t.name,t.artist,t.id,t.source),this.audio_title=t.name,this.audio_artist=t.artist;else if(this.lyric=window._lrc.getLyrics(),this.lyric.length>1){let t=window._lrc.select(_player.audio.currentTime);this.lyricFocus!=t&&(this.lyricFocus=t,this.$nextTick(()=>{let t=document.querySelector(".lyric p.focus");if(t){let e=t.offsetTop-.5*document.querySelector("main").clientHeight+t.clientHeight*(this.lyricTranslated?1.75:.75);window.scrollTo(document.querySelector(".md-app-content"),e,200)}}))}}else this.noloadedLyric=!0,this.lyricSearching=!1},updateSearchLyric(){this.lyricSearchResult&&this.showLyricDialog&&this.lyricSearchResult.map(t=>{let e=new window._lyricReader(t.lyric),s=e.getLyrics(),a=e.select(_player.audio.currentTime);return t.nowLyric=s[a].text,""==t.nowLyric.trim()&&(t.nowLyric="．．．"),t.nowLyricT="",this.lyricTranslated&&(t.nowLyricT=s[a+1].text),t})},getLyric(t,e,s=!1,a){let i,n=/\[([0-9.:]*)\]/i;s?(i=_setting("server")+`/pokaapi/lyric/?moduleName=${encodeURIComponent(a)}&id=${encodeURIComponent(s)}&time=${(new Date).getTime()}`,this.axios(i).then(s=>{s.data.lyrics[0].lyric&&s.data.lyrics[0].lyric.match(n)?t==this.audio_title&&this.loadLrc(s.data.lyrics[0].lyric):this.getLyricByKeyword(t,e)})):this.getLyricByKeyword(t,e)},getLyricByKeyword(t,e,s=!0){this.axios(_setting("server")+`/pokaapi/searchLyrics/?keyword=${encodeURIComponent(t+" "+e)}`).then(t=>t.data).then(a=>{a.lyrics.length>0&&(a.lyrics.forEach(s=>{let a=.7*this.matchRate(t,s.name)+.3*this.matchRate(e,s.artist);a=Math.round(100*a)/100,s.rate=a>0?a>100?90.25:a:0}),a.lyrics.sort((t,e)=>e.rate-t.rate),t==this.audio_title&&(a.lyrics[0].rate>35&&s&&this.loadLrc(a.lyrics[0].lyric),this.lyricSearchResult=a.lyrics,this.updateSearchLyric())),this.lyricSearching=!1})},matchRate(t,e,s=0){t=t.toLowerCase(),e=e.toLowerCase();for(let a of t.split(""))e.includes(a)?s++:s--;for(let a of e.split(""))t.includes(a)?s++:s--;return Math.round(s/(2*t.length)*1e4)/100},loadLrc(t,e=!1){window._lrc.load(t),window.scrollTo(document.querySelector(".md-app-content"),0,200),this.lyricFocus=0;try{window._lrc.lyrics_all[window._lrc.lyrics_all.length-2].timestamp==window._lrc.lyrics_all[window._lrc.lyrics_all.length-1].timestamp?(window._lrc.lyrics_all[window._lrc.lyrics_all.length-1].timestamp=99999,this.lyricTranslated=!0):this.lyricTranslated=!1}catch(s){this.lyricTranslated=!1}if(this.lyricSearching=!1,e){let e=_player.list.audios[_player.list.index];this.axios.post(_setting("server")+"/pokaapi/lyric",{title:e.name,artist:e.artist,songId:e.id,source:e.source,lyric:t})}}}},Jt=Gt,Wt=(s("8048"),Object(u["a"])(Jt,qt,Ft,!1,null,"666a0bc1",null)),Kt=Wt.exports,Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"search-box",class:{focus:t.searchBoxFocus}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keyword,expression:"keyword",modifiers:{trim:!0}}],staticClass:"search-input",attrs:{type:"text",placeholder:t.$t("search"),autocomplete:"off",required:""},domProps:{value:t.keyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)},focus:function(e){t.searchBoxFocus=!0},blur:[function(e){t.searchBoxFocus=!1},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.keyword=e.target.value.trim())}}}),s("button",{staticClass:"search-button",on:{click:t.search}},[s("md-icon",[t._v("search")])],1)]),t.isLoading?s("poka-loader"):t._e(),!t.isLoading&&t.searchResult?s("poka-parse-multiple",{attrs:{data:t.searchResult}}):t._e()],1)},Xt=[],Zt={name:"Search",data:()=>({keyword:"",searchResult:null,isLoading:!1,searchBoxFocus:!1}),methods:{search(){""!=this.keyword&&(this.isLoading=!0,this.axios.get(_setting("server")+"/pokaapi/search/?keyword="+this.keyword).then(t=>{this.searchResult=[t.data],this.isLoading=!1}).catch(t=>this.isLoading=!1))}}},te=Zt,ee=(s("1744"),Object(u["a"])(te,Yt,Xt,!1,null,"1e3e7b6c",null)),se=ee.exports,ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("settings"),subtitle:"PokaPlayer"}}),s("poka-update"),s("md-list",{staticClass:"md-double-line"},[s("md-list-item",{attrs:{to:"/setting/network"}},[s("md-icon",[t._v("cloud")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settings_network")))]),s("span",[t._v(t._s(t.$t("settings_network_description")))])])],1),s("md-list-item",{attrs:{to:"/setting/customize"}},[s("md-icon",[t._v("format_paint")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settings_customize")))]),s("span",[t._v(t._s(t.$t("settings_customize_description")))])])],1),s("md-list-item",{attrs:{to:"/setting/lang"}},[s("md-icon",[t._v("translate")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settings_lang")))]),s("span",[t._v(t._s(t.$t("settings_lang_description")))])])],1),s("md-list-item",{attrs:{to:"/setting/user"}},[s("md-icon",[t._v("person")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settingUser.title")))]),s("span",[t._v(t._s(t.$t("settingUser.description")))])])],1),s("md-list-item",{attrs:{to:"/setting/system"}},[s("md-icon",[t._v("system_update")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settings_systemAndUpdate")))]),s("span",[t._v(t._s(t.$t("settings_systemAndUpdate_description")))])])],1),s("md-list-item",{on:{click:function(e){t.aboutDialog=!0}}},[s("md-icon",[t._v("info")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settings_about")))]),s("span",[t._v(t._s(t.$t("settings_about_description")))])])],1)],1),s("md-dialog",{attrs:{"md-active":t.aboutDialog,"md-fullscreen":!1},on:{"update:mdActive":function(e){t.aboutDialog=e},"update:md-active":function(e){t.aboutDialog=e}}},[s("md-dialog-title",[t._v(t._s(t.$t("settings_about")))]),s("poka-about"),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:function(e){t.aboutDialog=!1}}},[t._v(t._s(t.$t("back")))])],1)],1)],1)},ie=[],ne={name:"Setting",data:()=>({settings:{darkMode:window._setting("darkMode")},aboutDialog:!1})},oe=ne,re=Object(u["a"])(oe,ae,ie,!1,null,null,null),le=re.exports,de=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("settings"),subtitle:t.$t("settings_network")}}),s("md-list",{staticStyle:{"padding-bottom":"0"}},[s("md-list-item",{attrs:{to:"/setting"}},[s("md-icon",[t._v("arrow_back")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("back")))])])],1)],1),s("md-list",{staticClass:"md-double-line",staticStyle:{"padding-top":"0"}},[s("md-list-item",{on:{click:function(e){t.showSoundQualityDialog=!0}}},[s("md-icon",[t._v("music_note")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settings_network_soundQuality")))]),s("span",[t._v(t._s(t.$t("settings_network_soundQuality_"+t.soundQuality)))])])],1)],1),s("md-dialog",{attrs:{"md-active":t.showSoundQualityDialog,"md-fullscreen":!1},on:{"update:mdActive":function(e){t.showSoundQualityDialog=e},"update:md-active":function(e){t.showSoundQualityDialog=e}}},[s("md-dialog-title",[t._v(t._s(t.$t("settings_network_soundQuality")))]),s("poka-cards",{staticClass:"poka four doubling cards",attrs:{"hide-overflow":!1}},[s("poka-card",{attrs:{"poka-icon":"outline-music_note","poka-title":t.$t("settings_network_soundQuality_Low"),"poka-subtitle":t.$t("settings_network_soundQuality_Low_description")},nativeOn:{click:function(e){return t.setSoundQuality("Low")}}}),s("poka-card",{attrs:{"poka-icon":"outline-music_note","poka-title":t.$t("settings_network_soundQuality_Med"),"poka-subtitle":t.$t("settings_network_soundQuality_Med_description")},nativeOn:{click:function(e){return t.setSoundQuality("Med")}}}),s("poka-card",{attrs:{"poka-icon":"outline-music_note","poka-title":t.$t("settings_network_soundQuality_High"),"poka-subtitle":t.$t("settings_network_soundQuality_High_description")},nativeOn:{click:function(e){return t.setSoundQuality("High")}}}),s("poka-card",{attrs:{"poka-icon":"outline-music_note","poka-title":t.$t("settings_network_soundQuality_Ori"),"poka-subtitle":t.$t("settings_network_soundQuality_Ori_description")},nativeOn:{click:function(e){return t.setSoundQuality("Ori")}}})],1),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:function(e){t.showSoundQualityDialog=!1}}},[t._v(t._s(t.$t("cancel")))])],1)],1)],1)},ce=[],ue={name:"SettingNetwork",data:()=>({soundQuality:window._setting("audioQuality"),showSoundQualityDialog:!1}),methods:{setSoundQuality(t){try{this.soundQuality=t,this.showSoundQualityDialog=!1,window._setting("audioQuality",t),this.axios({method:"post",url:_setting("server")+"/setting/",data:{n:{audioQuality:t}}})}catch(e){console.error(e)}}}},me=ue,pe=Object(u["a"])(me,de,ce,!1,null,null,null),_e=pe.exports,ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("settings"),subtitle:t.$t("settings_customize"),bg:t.setting.bg}}),s("md-list",[s("md-list-item",{attrs:{to:"/setting"}},[s("md-icon",[t._v("arrow_back")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("back")))])])],1)],1),s("div",{staticStyle:{"margin-left":"16px"}},[s("span",{staticClass:"md-title"},[t._v(t._s(t.$t("settings_customize_bg")))]),s("md-divider",{staticStyle:{margin:"4px"}}),s("poka-cards",[s("poka-card",{attrs:{"poka-icon":"outline-link","poka-title":t.$t("settings_customize_bg_link")},nativeOn:{click:function(e){t.bg_prompt_active=!0}}}),t._l(t.imgSources,(function(e){var a=e.name,i=e.src;return s("poka-card",{key:i,attrs:{"poka-bg":i,"poka-title":a},nativeOn:{click:function(e){return t.setBg(i)}}})}))],2)],1),s("md-dialog-prompt",{attrs:{"md-active":t.bg_prompt_active,"md-title":t.$t("settings_customize_bg"),"md-input-placeholder":"https://...","md-cancel-text":t.$t("cancel"),"md-confirm-text":t.$t("ok")},on:{"update:mdActive":function(e){t.bg_prompt_active=e},"update:md-active":function(e){t.bg_prompt_active=e}},model:{value:t.setting.bg,callback:function(e){t.$set(t.setting,"bg",e)},expression:"setting.bg"}})],1)},he=[],ve={name:"SettingCustomize",data:()=>({bg_prompt_active:!1,setting:{bg:window._setting("headerBgSource")},imgSources:[{name:"LoremFlickr",src:"https://loremflickr.com/1920/1080"},{name:"Picsum Photos",src:"https://picsum.photos/1920/1080/?random"},{name:"Bing",src:"https://area.sinaapp.com/bingImg/"},{name:"The Dog API (GIF)",src:"https://api.thedogapi.com/v1/images/search?format=src&mime_types=image/gif"},{name:"The Dog API (PNG)",src:"https://api.thedogapi.com/v1/images/search?format=src&mime_types=image/png"},{name:"The Cat API (GIF)",src:"https://thecatapi.com/api/images/get?format=src&type=gif"},{name:"The Cat API (PNG)",src:"https://thecatapi.com/api/images/get?format=src&type=png"},{name:"Unsplash Source",src:"https://source.unsplash.com/random"},{name:"Sword Art Online: Alicization",src:"https://images2.imgbox.com/99/e2/knJdNcns_o.jpg"},{name:"iClart 隨機 ACG 圖片",src:`https://acg.iclart.com/api.php?return=webp&rand=${(new Date).getTime()}`}]}),watch:{"setting.bg":t=>{window._setting("headerBgSource",t)}},methods:{setBg(t){this.setting.bg=t,this.axios({method:"post",url:_setting("server")+"/setting/",data:{n:{headerBgSource:t}}})}}},ye=ve,fe=Object(u["a"])(ye,ge,he,!1,null,null,null),we=fe.exports,be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("settings"),subtitle:t.$t("settings_lang")}}),s("md-list",[s("md-list-item",{attrs:{to:"/setting"}},[s("md-icon",[t._v("arrow_back")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("back")))])])],1),t._l(t.languages,(function(e,a){return s("md-list-item",{key:"lang"+e+"-"+a,on:{click:function(s){return t.setLang(e)}}},[s("md-icon",[t._v("translate")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("title",e)))])]),s("md-icon",{directives:[{name:"show",rawName:"v-show",value:t.currentLang==e,expression:"currentLang==lang"}]},[t._v("check")])],1)}))],2)],1)},ke=[],$e={name:"SettingLang",data:()=>({languages:Object.keys(window.i18n.messages),currentLang:window.i18n.locale}),methods:{setLang(t){window.i18n.locale=t,this.currentLang=t,window._setting("lang",t),this.axios({method:"post",url:_setting("server")+"/setting/",data:{n:{lang:t}}})}}},Pe=$e,Ce=Object(u["a"])(Pe,be,ke,!1,null,null,null),Se=Ce.exports,xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("settings"),subtitle:t.$t("settings_systemAndUpdate")}}),s("md-list",[s("md-list-item",{attrs:{to:"/setting"}},[s("md-icon",[t._v("arrow_back")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("back")))])])],1),s("md-subheader",[t._v(t._s(t.$t("settings_system")))]),s("md-list-item",{on:{click:function(e){t.restartConfirmActive=!0}}},[s("md-icon",[t._v("autorenew")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settings_restart")))])])],1)],1),s("md-list",{staticClass:"md-double-line",staticStyle:{"padding-top":"0"}},[s("md-list-item",{class:{mark:this.newVersion.tag},on:{click:t.openUpdateDialog}},[s("md-icon",[t._v("system_update")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settings_update")))]),s("span",[t._v("\n\t\t\t\t\t"+t._s(t.checkUpadteStatus)+"\n\t\t\t\t\t"),t.poka_debug?s("span",[t._v("(debug: "+t._s(t.poka_debug)+")")]):t._e()])])],1)],1),s("md-dialog-confirm",{attrs:{"md-active":t.restartConfirmActive,"md-title":t.$t("settings_restartDialog_title"),"md-content":t.$t("settings_updateDialog_note"),"md-cancel-text":t.$t("cancel"),"md-confirm-text":t.$t("ok")},on:{"update:mdActive":function(e){t.restartConfirmActive=e},"update:md-active":function(e){t.restartConfirmActive=e},"md-confirm":t.restart}}),s("md-dialog",{attrs:{"md-active":t.showUpdateDialog,"md-fullscreen":!1},on:{"update:mdActive":function(e){t.showUpdateDialog=e},"update:md-active":function(e){t.showUpdateDialog=e}}},[s("md-dialog-title",[t._v(t._s(t.$t("settings_updateDialog_title",{version:this.newVersion.tag})))]),s("md-dialog-content",[s("p",{domProps:{innerHTML:t._s(t.newVersion.body)}}),s("p",[t._v(t._s(t.$t("settings_updateDialog_note")))])]),s("md-dialog-actions",[s("md-button",{on:{click:function(e){t.showUpdateDialog=!1}}},[t._v(t._s(t.$t("cancel")))]),s("md-button",{staticClass:"md-primary",on:{click:function(e){t.showUpdateDialog=!1,t.update()}}},[t._v(t._s(t.$t("settings_update")))])],1)],1),s("md-dialog",{attrs:{"md-active":t.showUpdateingDialog,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(e){t.showUpdateingDialog=e},"update:md-active":function(e){t.showUpdateingDialog=e}}},[s("md-dialog-content",[s("pre",{staticClass:"log"},[t._v(t._s(t.updateLog))]),s("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1)],1),s("md-dialog",{attrs:{"md-active":t.showRestartingDialog,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(e){t.showRestartingDialog=e},"update:md-active":function(e){t.showRestartingDialog=e}}},[s("md-dialog-title",[t._v(t._s(t.$t("settings_restarting")))])],1),s("md-dialog",{attrs:{"md-active":t.showRestartCompletedDialog,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(e){t.showRestartCompletedDialog=e},"update:md-active":function(e){t.showRestartCompletedDialog=e}}},[s("md-dialog-title",[t._v(t._s(t.$t("settings_restart_completed")))]),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:t.reload}},[t._v(t._s(t.$t("settings_update_reconnect")))])],1)],1)],1)},Ae=[],De={name:"SettingSystem",data:()=>({checkUpadteStatus:i18n.t("settings_update_checking4updates"),restartConfirmActive:!1,showUpdateDialog:!1,showUpdateingDialog:!1,showRestartingDialog:!1,showRestartCompletedDialog:!1,updateLog:"",poka_version:null,poka_debug:null,newVersion:{prerelease:null,tag:null,body:"<h1>===PokaPlayer===</h1>"}}),created(){this.axios.get(_setting("server")+"/status/").then(t=>{this.poka_version=t.data.version,this.poka_debug="false"!=t.data.debug?t.data.debug:null,this.fetchNewVersion()})},methods:{openUpdateDialog(){(this.poka_debug||this.newVersion.tag)&&(this.showUpdateDialog=!0)},fetchNewVersion(){fetch("https://api.github.com/repos/gnehs/PokaPlayer/releases").then(t=>t.json()).then(t=>{this.newVersion.body=`<h1 align="center">Version ${t[0].tag_name}</h1>`+(new showdown.Converter).makeHtml(t[0].body)+"<hr>"+`<h1 align="center">Version ${t[1].tag_name}</h1>`+(new showdown.Converter).makeHtml(t[1].body)+"<hr>"+`<h1 align="center">Version ${t[2].tag_name}</h1>`+(new showdown.Converter).makeHtml(t[2].body),this.compareVersion(this.poka_version,t[0].tag_name)?(this.newVersion.prerelease=t[0].prerelease,this.newVersion.tag=t[0].tag_name,this.checkUpadteStatus=i18n.t("settings_update_update2",{version:this.newVersion.tag})):this.checkUpadteStatus=i18n.t("settings_update_latestVersion")}).catch(t=>console.error(t))},update(){window._player.pause(),this.axios.get("/upgrade").then(t=>{this.showUpdateingDialog=!0,this.updateLog+=window.i18n.t("settings_update_update2",{version:this.newVersion.tag})+"\n","upgrade"==t.data?setTimeout(()=>{alert("更新完成！"),location.reload()},3e4):"socket"==t.data&&(_socket.emit("login",{username:window._setting("username"),password:window._setting("password")}),_socket.emit("update"),window._socket.on("Permission Denied Desu",()=>{this.showUpdateingDialog=!1,alert("Permission Denied")}),window._socket.on("init",()=>{this.updateLog+=window.i18n.t("settings_update_initializing")+"\n"}),window._socket.on("git",t=>{this.updateLog+={fetch:window.i18n.t("settings_update_git_fetch"),reset:window.i18n.t("settings_update_git_reset"),api:window.i18n.t("settings_update_git_api")}[t]+"\n"}),window._socket.on("restart",()=>{this.updateLog+=window.i18n.t("settings_restarting")+"\n",window._socket.on("hello",()=>{this.showUpdateingDialog=!1,this.showRestartCompletedDialog=!0})}),window._socket.on("err",t=>this.updateLog+=`[ERROR] ${t}`))})},restart(){window._player.pause(),this.showRestartingDialog=!0,this.axios.post("/restart"),setTimeout(()=>{window._socket.on("hello",()=>{this.showRestartingDialog=!1,this.showRestartCompletedDialog=!0})},2e3)},reload(){window.location.reload()},compareVersion(t,e){return t=t.split(".").map(t=>parseInt(t)),e=e.split(".").map(t=>parseInt(t)),t=1e3*t[0]*1e3+1e3*t[1]+t[2],e=1e3*e[0]*1e3+1e3*e[1]+e[2],e>t}}},Ue=De,Me=(s("4549"),s("3f7d"),Object(u["a"])(Ue,xe,Ae,!1,null,"5001e1a6",null)),Ne=Me.exports,Le=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("poka-header",{attrs:{title:t.$t("settingUser.title"),subtitle:t.$t("settings")}}),s("md-list",[s("md-list-item",{attrs:{to:"/setting"}},[s("md-icon",[t._v("arrow_back")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("back")))])])],1)],1),t.userdata?s("md-list",{staticClass:"md-double-line",staticStyle:{"padding-top":"0"}},[s("md-list-item",{on:{click:function(e){t.temp.changeNamePrompt=!0}}},[s("md-icon",[t._v("person")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settingUser.name")))]),s("span",[t._v(t._s(t.userdata.name))])])],1),s("md-list-item",{on:{click:function(e){t.temp.changeUsernamePrompt=!0}}},[s("md-icon",[t._v("alternate_email")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settingUser.username")))]),s("span",[t._v(t._s(t.userdata.username))])])],1),s("md-list-item",[s("md-icon",[t._v("settings")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settingUser.role")))]),s("span",[t._v(t._s(t.userdata.role))])])],1),s("md-list-item",{on:{click:function(e){t.temp.changePasswordDialog=!0}}},[s("md-icon",[t._v("lock")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settingUser.password")))]),s("span",[t._v(t._s(t.$t("settingUser.passwordDescription")))])])],1)],1):s("poka-loader"),s("md-list",[s("md-list-item",{on:{click:t.logout}},[s("md-icon",[t._v("exit_to_app")]),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(t.$t("settings_logout")))])])],1)],1),s("md-dialog-prompt",{attrs:{"md-active":t.temp.changeNamePrompt,"md-title":t.$t("settingUser.changeName.title"),"md-input-maxlength":"30","md-input-placeholder":t.$t("settingUser.changeName.placeholder"),"md-cancel-text":t.$t("cancel"),"md-confirm-text":t.$t("done")},on:{"update:mdActive":function(e){return t.$set(t.temp,"changeNamePrompt",e)},"update:md-active":function(e){return t.$set(t.temp,"changeNamePrompt",e)},"md-confirm":t.changeName},model:{value:t.temp.changeNameValue,callback:function(e){t.$set(t.temp,"changeNameValue",e)},expression:"temp.changeNameValue"}}),s("md-dialog-prompt",{attrs:{"md-active":t.temp.changeUsernamePrompt,"md-title":t.$t("settingUser.changeUsername.title"),"md-input-maxlength":"30","md-input-placeholder":t.$t("settingUser.changeUsername.placeholder"),"md-cancel-text":t.$t("cancel"),"md-confirm-text":t.$t("done")},on:{"update:mdActive":function(e){return t.$set(t.temp,"changeUsernamePrompt",e)},"update:md-active":function(e){return t.$set(t.temp,"changeUsernamePrompt",e)},"md-confirm":t.changeUsername},model:{value:t.temp.changeUsernameValue,callback:function(e){t.$set(t.temp,"changeUsernameValue",e)},expression:"temp.changeUsernameValue"}}),s("md-dialog",{attrs:{"md-active":t.temp.changePasswordDialog,"md-click-outside-to-close":!1,"md-fullscreen":!1},on:{"update:mdActive":function(e){return t.$set(t.temp,"changePasswordDialog",e)},"update:md-active":function(e){return t.$set(t.temp,"changePasswordDialog",e)}}},[s("md-dialog-title",[t._v(t._s(t.$t("settingUser.changePassword.title")))]),s("md-dialog-content",[s("md-field",[s("label",[t._v(t._s(t.$t("settingUser.changePassword.oldPassword")))]),s("md-input",{attrs:{type:"password"},model:{value:t.temp.changePasswordold,callback:function(e){t.$set(t.temp,"changePasswordold",e)},expression:"temp.changePasswordold"}})],1),s("md-field",[s("label",[t._v(t._s(t.$t("settingUser.changePassword.newPassword")))]),s("md-input",{attrs:{type:"password"},model:{value:t.temp.changePassword,callback:function(e){t.$set(t.temp,"changePassword",e)},expression:"temp.changePassword"}})],1),s("md-field",[s("label",[t._v(t._s(t.$t("settingUser.changePassword.confirmPassword")))]),s("md-input",{attrs:{type:"password"},model:{value:t.temp.changePassword2,callback:function(e){t.$set(t.temp,"changePassword2",e)},expression:"temp.changePassword2"}}),s("span",{staticClass:"md-helper-text"},[t._v(t._s(t.$t("settingUser.changePassword.confirmPasswordHelperText")))])],1)],1),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:function(e){t.temp.changePasswordDialog=!1}}},[t._v(t._s(t.$t("cancel")))]),s("md-button",{staticClass:"md-primary",on:{click:t.changePassword}},[t._v(t._s(t.$t("settingUser.changePassword.done")))])],1)],1),s("md-snackbar",{attrs:{"md-position":"center","md-duration":3e3,"md-active":t.snackbar.show,"md-persistent":""},on:{"update:mdActive":function(e){return t.$set(t.snackbar,"show",e)},"update:md-active":function(e){return t.$set(t.snackbar,"show",e)}}},[s("span",[t._v(t._s(t.snackbar.text))])])],1)},Te=[],Re={name:"SettingUser",data:()=>({userdata:null,snackbar:{show:!1,text:""},temp:{changeNamePrompt:!1,changeNameValue:"",changeUsernamePrompt:!1,changeUsernameValue:"",changePasswordDialog:!1,changePassword:"",changePassword2:"",changePasswordold:""}}),created(){sessionStorage.getItem("login")?this.userdata=JSON.parse(sessionStorage.getItem("login")):this.axios.get(_setting("server")+"/profile/").then(t=>{this.userdata=t.data})},methods:{changeName(){if(""==this.temp.changeNameValue||!this.temp.changeNameValue)return this.showMessage(window.i18n.t("settingUser.changeName.result.error"));this.axios.post(_setting("server")+"/changeName/",{n:this.temp.changeNameValue}).then(t=>{t.data.success?(this.userdata.name=this.temp.changeNameValue,this.showMessage(window.i18n.t("settingUser.changeName.result.success",{name:this.temp.changeNameValue}))):this.showMessage(window.i18n.t("settingUser.changeName.result.error"))})},changeUsername(){if(""==this.temp.changeUsernameValue||!this.temp.changeUsernameValue)return this.showMessage(window.i18n.t("settingUser.changeUsername.result.error"));this.axios.post(_setting("server")+"/changeUsername/",{n:this.temp.changeUsernameValue}).then(t=>{t.data.success?(this.userdata.username=this.temp.changeUsernameValue,this.showMessage(window.i18n.t("settingUser.changeUsername.result.success",{name:this.temp.changeUsernameValue}))):t.data.error?this.showMessage(t.data.error):this.showMessage(window.i18n.t("settingUser.changeUsername.result.error"))})},changePassword(){return""!=this.temp.changePassword&&this.temp.changePassword&&""!=this.temp.changePassword2&&this.temp.changePassword2&&""!=this.temp.changePasswordold&&this.temp.changePasswordold?this.temp.changePassword!==this.temp.changePassword2?this.showMessage(window.i18n.t("settingUser.changePassword.result.inconsistent")):this.temp.changePassword===this.temp.changePasswordold?this.showMessage(window.i18n.t("settingUser.changePassword.result.same")):void this.axios.post(_setting("server")+"/changePassword/",{oldpassword:this.temp.changePasswordold,password:this.temp.changePassword}).then(t=>{t.data.success?(this.showMessage(window.i18n.t("settingUser.changePassword.result.success")),this.temp.changePasswordDialog=!1):t.data.error?this.showMessage(t.data.error):this.showMessage(window.i18n.t("settingUser.changePassword.result.error"))}):this.showMessage(window.i18n.t("settingUser.changePassword.result.error"))},showMessage(t){this.snackbar.text=t,this.snackbar.show=!0},logout(){sessionStorage.removeItem("login"),this.axios("/logout").then(t=>this.$router.push("/login"))}}},Ie=Re,Ee=(s("23a9"),Object(u["a"])(Ie,Le,Te,!1,null,"93796f02",null)),Oe=Ee.exports;o["default"].use(_["a"]);var He=new _["a"]({mode:"history",routes:[{path:"/lyric",name:"Lyric",component:Kt},{path:"/album/songs/:source/:id",name:"AlbumSongs",component:S,meta:{transitionName:"slide"}},{path:"/album",name:"Album",component:w},{path:"/artist/:source/:id",name:"ArtistAlbum",component:O,meta:{transitionName:"slide"}},{path:"/artist",name:"Artist",component:N},{path:"/composer/:source/:id",name:"ComposerAlbum",component:K,meta:{transitionName:"slide"}},{path:"/composer",name:"Composer",component:z},{path:"/folder/:source/:id",name:"folderFiles",component:st,meta:{transitionName:"slide",root:!1}},{path:"/folder",name:"Folder",component:st,meta:{root:!0}},{path:"/install",name:"Install",component:_t},{path:"/login",name:"Login",component:wt},{path:"/now",name:"NowPlaying",component:St},{path:"/playlist/:source/:id",component:zt,name:"PlaylistSongs",meta:{transitionName:"slide"}},{path:"/playlist",name:"Playlist",component:Ot},{path:"/search",name:"Search",component:se},{path:"/setting",name:"Setting",component:le},{path:"/setting/network",name:"SettingNetwork",component:_e,meta:{transitionName:"slide"}},{path:"/setting/customize",name:"SettingCustomize",component:we,meta:{transitionName:"slide"}},{path:"/setting/lang",name:"SettingLang",component:Se,meta:{transitionName:"slide"}},{path:"/setting/system",name:"SettingSystem",component:Ne,meta:{transitionName:"slide"}},{path:"/setting/user",name:"SettingUser",component:Oe,meta:{transitionName:"slide"}},{path:"/home",name:"Home",component:lt},{path:"/notfound",name:"Notfound",component:Nt},{path:"/",redirect:"/home"},{path:"*",redirect:"/notfound"}]}),je=s("a925"),Qe=s("c224"),Ve=s("116c"),Be=s("1e69");o["default"].use(je["a"]);const ze=window._setting("lang"),qe={zh_CN:Qe,zh_TW:Ve,en_US:Be},Fe=new je["a"]({locale:ze,fallbackLocale:"en_US",messages:qe,missing:(t,e,s)=>{return console.log(t,e,s),e}});window.i18n=Fe;var Ge=Fe,Je=s("2f62");o["default"].use(Je["a"]);var We=new Je["a"].Store({state:{},mutations:{},actions:{}}),Ke=s("9483");Object(Ke["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var Ye=s("bc3a"),Xe=s.n(Ye),Ze=s("a7fe"),ts=s.n(Ze),es=s("43f9"),ss=s.n(es),as=(s("51de"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("div",{staticClass:"content"},[s("img",{staticStyle:{height:"128px"},attrs:{src:"/img/icons/apple-touch-icon.png"}}),s("h1",[t._v("PokaPlayer")]),s("p",{staticClass:"md-subheading"},[t._v(t._s(t.poka_version))]),s("a",{attrs:{href:"https://github.com/gnehs/PokaPlayer/",target:"_blank"}},[t._v("GitHub")]),s("span",[t._v("．")]),s("a",{attrs:{href:"https://github.com/gnehs/PokaPlayer/issues",target:"_blank"}},[t._v(t._s(t.$t("settings_about_errorEeport")))]),s("span",[t._v("．")]),s("a",{attrs:{href:"https://github.com/gnehs/PokaPlayer/graphs/contributors",target:"_blank"}},[t._v(t._s(t.$t("settings_about_contributions")))])])])}),is=[],ns={name:"poka-about",data:()=>({poka_version:"Loading..."}),created(){this.axios.get(_setting("server")+"/status/").then(t=>{t.data.version||this.$router.push("/login"),this.poka_version=t.data.version})}},os=ns,rs=(s("69f1"),Object(u["a"])(os,as,is,!1,null,"14180809",null)),ls=rs.exports,ds=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"header-wrapper"},[s("div",{staticClass:"bg",class:{blur:t.blurbg},style:{backgroundImage:'url("'+t.bg+'")'}})]),t.title?s("div",{staticClass:"header"},[s("div",{staticClass:"title",staticStyle:{"line-height":"normal"}},[t._v(t._s(t.title))]),s("div",{staticClass:"subtitle"},[t._v(t._s(t.subtitle))])]):t._e()])},cs=[],us={name:"poka-header",props:{title:String,subtitle:String,bg:{type:String,default:_setting("headerBgSource")},blurbg:{type:Boolean,default:!1}}},ms=us,ps=(s("2432"),Object(u["a"])(ms,ds,cs,!1,null,"24557b7f",null)),_s=ps.exports,gs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"info-header"},[s("div",{staticClass:"cover",style:"background-image: url('"+t.cover+"')"}),s("div",{staticClass:"info"},[s("div",{staticClass:"album-name",attrs:{title:t.title}},[t._v(t._s(t.title))]),s("div",{staticClass:"artist-name",attrs:{title:t.subtitle}},[t._v(t._s(t.subtitle))]),s("div",{staticClass:"grow"}),s("div",{staticClass:"footer"},[t.songs?s("div",{staticClass:"time"},[t._v(t._s(t.$t("album_total",{songs:t.songs})))]):t._e(),s("div",{staticClass:"actions"},[t._t("default")],2)])])])},hs=[],vs={name:"info-header",props:{cover:String,title:String,subtitle:String,songs:{default:0}},data:()=>({}),created(){}},ys=vs,fs=(s("d6ed"),Object(u["a"])(ys,gs,hs,!1,null,"45a249f8",null)),ws=fs.exports,bs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.to?s("router-link",{staticClass:"card",attrs:{to:t.to,"data-source":t.parsed_source||void 0}},[t.parsed_pokaBg?s("div",{staticClass:"image",style:{backgroundImage:'url("'+t.parsed_pokaBg+'")'}}):s("div",{staticClass:"image"},[s("md-icon",{staticClass:"icon-white",class:t.pokaIcon})],1),s("div",{staticClass:"title"},[t._v(t._s(t.pokaTitle))]),s("div",{staticClass:"subtitle"},[t._v(t._s(t.pokaSubtitle))])]):s("a",{staticClass:"card",attrs:{"data-source":t.parsed_source||void 0}},[t.parsed_pokaBg?s("div",{staticClass:"image",style:{backgroundImage:'url("'+t.parsed_pokaBg+'")'}}):s("div",{staticClass:"image"},[s("md-icon",{staticClass:"icon-white",class:t.pokaIcon})],1),s("div",{staticClass:"title"},[t._v(t._s(t.pokaTitle))]),s("div",{staticClass:"subtitle"},[t._v(t._s(t.pokaSubtitle))])])},ks=[],$s={name:"poka-card",props:{pokaBg:{default:null},source:{default:""},pokaTitle:String,pokaSubtitle:String,to:String,pokaIcon:{default:"outline-play_circle_filled",type:String}},data:()=>({parsed_source:null,parsed_pokaBg:null}),created(){"Netease2"==this.source?this.parsed_source=i18n.t("moduleShowName_Netease"):"DSM"==this.source?this.parsed_source=i18n.t("moduleShowName_DSM"):this.parsed_source=this.source,"string"===typeof this.pokaBg&&this.pokaBg.startsWith("http")?this.parsed_pokaBg=this.pokaBg:this.pokaBg&&(this.parsed_pokaBg=_setting("server")+this.pokaBg)}},Ps=$s,Cs=Object(u["a"])(Ps,bs,ks,!1,null,null,null),Ss=Cs.exports,xs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"poka cards"},[t._t("default")],2)},As=[],Ds={name:"poka-cards"},Us=Ds,Ms=(s("a5da"),Object(u["a"])(Us,xs,As,!1,null,null,null)),Ns=Ms.exports,Ls=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("md-progress-spinner",{attrs:{"md-mode":"indeterminate","md-stroke":3,"md-diameter":30}})],1)},Ts=[],Rs={name:"poka-loader"},Is=Rs,Es=(s("1c1c"),Object(u["a"])(Is,Ls,Ts,!1,null,"757b4a3b",null)),Os=Es.exports,Hs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[null!=t.isPinned&&"disabled"!=t.isPinned&&"speed-dial"==t.btnType?s("md-speed-dial",{staticClass:"md-bottom-right"},[s("md-speed-dial-target",{on:{click:t.pin}},[t.isPinned?s("md-icon",[t._v("turned_in")]):s("md-icon",[t._v("turned_in_not")])],1)],1):t._e(),null!=t.isPinned&&"disabled"!=t.isPinned&&"icon-button"==t.btnType?s("md-button",{staticClass:"md-icon-button",on:{click:t.pin}},[t.isPinned?s("md-icon",[t._v("turned_in")]):s("md-icon",[t._v("turned_in_not")])],1):t._e()],1)},js=[],Qs={name:"pin-button",created(){this.getPinStatus()},props:{source:String,type:String,id:String,name:String,btnType:{type:String,default:"speed-dial"}},data:()=>({server:_setting("server"),isPinned:null}),methods:{getPinStatus(){this.name&&this.axios.post(`/pokaapi/isPinned/?moduleName=${this.source}&type=${this.type}&id=${this.id}&name=${this.name}`).then(t=>{this.isPinned=t.data})},pin(){this.axios.post(`/pokaapi/${this.isPinned?"unPin":"addPin"}/?moduleName=${this.source}&type=${this.type}&id=${this.id}&name=${this.name}`).then(t=>{this.getPinStatus()})}}},Vs=Qs,Bs=(s("3342"),Object(u["a"])(Vs,Hs,js,!1,null,"0f0de25f",null)),zs=Bs.exports,qs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("md-button",{staticClass:"md-primary md-outlined",attrs:{disabled:t.loadingRandom},on:{click:t.randomPlay}},[t.loadingRandom?s("span",[t._v(t._s(t.$t("loading")))]):s("span",[t._v(t._s(t.$t("playlist_random")))])])],1)},Fs=[],Gs={name:"play-random-button",data:()=>({loadingRandom:!1}),methods:{randomPlay(){this.loadingRandom=!0,this.$randomPlay()}}},Js=Gs,Ws=Object(u["a"])(Js,qs,Fs,!1,null,null,null),Ks=Ws.exports,Ys=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.checkUpadteStatus?s("div",{staticClass:"update-notify"},[s("h1",[t._v(t._s(t.$t("settings_update")))]),s("p",[t._v(t._s(t.checkUpadteStatus))]),s("md-button",{staticClass:"md-primary md-outlined md-theme-default-dark",attrs:{to:"/setting/system"}},[t._v(t._s(t.$t("settings_update_go2UpdatePage")))])],1):t._e()},Xs=[],Zs={name:"poka-update",created(){this.axios.get(_setting("server")+"/status/").then(t=>{this.fetchNewVersion(t.data.version)})},data:()=>({checkUpadteStatus:null}),methods:{compareVersion(t,e){return t=t.split(".").map(t=>parseInt(t)),e=e.split(".").map(t=>parseInt(t)),t=1e3*t[0]*1e3+1e3*t[1]+t[2],e=1e3*e[0]*1e3+1e3*e[1]+e[2],e>t},fetchNewVersion(t){fetch("https://api.github.com/repos/gnehs/PokaPlayer/releases").then(t=>t.json()).then(e=>{this.compareVersion(t,e[0].tag_name)&&(this.checkUpadteStatus=i18n.t("settings_update_canUpdate2",{version:e[0].tag_name}))}).catch(t=>console.error(t))}}},ta=Zs,ea=(s("59c3"),Object(u["a"])(ta,Ys,Xs,!1,null,"4e7e9dbc",null)),sa=ea.exports,aa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("poka-cards",t._l(t.data,(function(e,a){var i=e.name,n=e.image,o=e.id,r=e.source,l=e.type;return l&&"folder"==l?t._e():s("poka-card",{key:a,attrs:{to:"/playlist/"+encodeURIComponent(r)+"/"+encodeURIComponent(o||"unknown"),"poka-bg":n||!1,"poka-title":i,"poka-subtitle":t.$t("source."+r),source:t.$t("source."+r)}})})),1)},ia=[],na={name:"poka-parse-playlists",props:["data"],data:()=>({server:_setting("server")})},oa=na,ra=Object(u["a"])(oa,aa,ia,!1,null,null,null),la=ra.exports,da=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"poka two list"},t._l(t.data,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("md-ripple",[s("div",{staticClass:"content",on:{click:function(e){return t.$addSongs({songs:t.data,index:a})}}},[s("md-avatar",[s("img",{attrs:{src:e.cover?e.cover.startsWith("http")?e.cover:t.server+e.cover:t.defaultCover,alt:"cover"}})]),s("div",{staticClass:"header"},[s("div",{staticClass:"title t-ellipsis"},[t._v(t._s(e.name))]),s("div",{staticClass:"t-ellipsis"},[t._v(t._s(e.artist))])])],1),s("div",{staticClass:"action"},[s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(s){t.$addSongs({songs:[e],clear:!1}),t.isInSongList.push(a)}}},[t.isInSongList.includes(a)?s("md-icon",[t._v("done")]):s("md-icon",[t._v("add")])],1)],1)])],1)})),0)},ca=[],ua={name:"poka-parse-songs",props:["data"],data:()=>({server:_setting("server"),defaultCover:_setting("headerBgSource"),isInSongList:[]})},ma=ua,pa=Object(u["a"])(ma,da,ca,!1,null,null,null),_a=pa.exports,ga=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("poka-cards",t._l(t.data,(function(e){var a=e.name,i=e.cover,n=e.id,o=e.source;return s("poka-card",{key:n,attrs:{to:"/artist/"+encodeURIComponent(o)+"/"+encodeURIComponent(n||"unknown"),"poka-bg":i||!1,"poka-title":a||"未知","poka-subtitle":t.$t("source."+o)}})})),1)},ha=[],va={name:"poka-parse-artists",props:["data"],data:()=>({server:_setting("server")})},ya=va,fa=Object(u["a"])(ya,ga,ha,!1,null,null,null),wa=fa.exports,ba=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("poka-cards",t._l(t.data,(function(e){var a=e.name,i=e.artist,n=e.cover,o=e.id,r=e.source;return s("poka-card",{key:o,attrs:{to:"/album/songs/"+encodeURIComponent(r)+"/"+encodeURIComponent(o||"unknown"),"poka-bg":n||!1,"poka-title":a,"poka-subtitle":i,source:t.$t("source."+r)}})})),1)},ka=[],$a={name:"poka-parse-albums",props:["data"],data:()=>({server:_setting("server")})},Pa=$a,Ca=Object(u["a"])(Pa,ba,ka,!1,null,null,null),Sa=Ca.exports,xa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("poka-cards",t._l(t.data,(function(e){var a=e.name,i=e.cover,n=e.id,o=e.source;return s("poka-card",{key:n,attrs:{to:"/composer/"+encodeURIComponent(o)+"/"+encodeURIComponent(n||"unknown"),"poka-bg":i||!1,"poka-title":a||"未知","poka-subtitle":t.$t("source."+o)}})})),1)},Aa=[],Da={name:"poka-parse-composers",props:["data"],data:()=>({server:_setting("server")})},Ua=Da,Ma=Object(u["a"])(Ua,xa,Aa,!1,null,null,null),Na=Ma.exports,La=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"poka two list"},t._l(t.data,(function(e){var a=e.name,i=(e.image,e.id),n=e.source;return s("router-link",{key:i,staticClass:"item",attrs:{to:"/folder/"+encodeURIComponent(n)+"/"+encodeURIComponent(i||"unknown")}},[s("md-ripple",[s("div",{staticClass:"content"},[s("md-avatar",[s("md-icon",[t._v("folder")])],1),s("div",{staticClass:"header"},[s("div",{staticClass:"title t-ellipsis"},[t._v(t._s(a))]),s("div",{staticClass:"t-ellipsis"},[t._v(t._s(t.$t("source."+n)))])])],1)])],1)})),1)},Ta=[],Ra={name:"poka-parse-folders",props:["data"],data:()=>({server:_setting("server")})},Ia=Ra,Ea=(s("a95b"),Object(u["a"])(Ia,La,Ta,!1,null,"a5984cf4",null)),Oa=Ea.exports,Ha=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"poka-parse-multiple"},t._l(t.data,(function(e,a){return s("div",{key:a},[0!=a?s("md-divider"):t._e(),e.title?s("h1",[t._v("\n\t\t\t"+t._s(t.$t(e.title))+"\n\t\t\t"),s("span",{staticClass:"md-headline"},[t._v(t._s(t.$t("source."+e.source)))])]):t._e(),s("md-tabs",[e.songs&&e.songs.length>0?s("md-tab",{attrs:{"md-label":t.$t("song")}},[s("poka-parse-songs",{attrs:{data:e.songs}})],1):t._e(),e.albums&&e.albums.length>0?s("md-tab",{attrs:{"md-label":t.$t("album")}},[s("poka-parse-albums",{attrs:{data:e.albums}})],1):t._e(),e.playlists&&e.playlists.length>0?s("md-tab",{attrs:{"md-label":t.$t("playlist")}},[s("poka-parse-playlists",{attrs:{data:e.playlists}})],1):t._e(),e.folders&&e.folders.length>0?s("md-tab",{attrs:{"md-label":t.$t("folder")}},[s("poka-parse-folders",{attrs:{data:e.folders}})],1):t._e(),e.composers&&e.composers.length>0?s("md-tab",{attrs:{"md-label":t.$t("composer")}},[s("poka-parse-composers",{attrs:{data:e.composers}})],1):t._e(),e.artists&&e.artists.length>0?s("md-tab",{attrs:{"md-label":t.$t("artist")}},[s("poka-parse-artists",{attrs:{data:e.artists}})],1):t._e()],1)],1)})),0)},ja=[],Qa={name:"poka-parse-multiple",props:["data"]},Va=Qa,Ba=(s("6209"),Object(u["a"])(Va,Ha,ja,!1,null,"ff327ba8",null)),za=Ba.exports;Xe.a.defaults.withCredentials=!0,Xe.a.defaults.headers.common["Access-Control-Allow-Origin"]="*",o["default"].use(ts.a,Xe.a),o["default"].use(ss.a),Object.values(a).forEach(t=>o["default"].component(t.name,t));const qa=window.matchMedia("(prefers-color-scheme: dark)");function Fa(t=!1){o["default"].material.theming.theme=t?"default-dark":"default",document.getElementsByTagName("meta")["theme-color"].content=t?"rgb(33, 33, 33)":"rgb(245, 245, 245)"}Fa(qa.matches),qa.addListener(t=>{const e=t.matches;Fa(e)}),o["default"].config.productionTip=!1,new o["default"]({el:"#app",router:He,i18n:Ge,store:We,components:{App:p},template:"<App/>",render:t=>t(p)})},5903:function(t,e,s){},"59c3":function(t,e,s){"use strict";var a=s("24b1"),i=s.n(a);i.a},"5c0b":function(t,e,s){"use strict";var a=s("e332"),i=s.n(a);i.a},"5fc0":function(t,e,s){},6176:function(t,e,s){},6209:function(t,e,s){"use strict";var a=s("62ae"),i=s.n(a);i.a},"62ae":function(t,e,s){},"69f1":function(t,e,s){"use strict";var a=s("f1f4"),i=s.n(a);i.a},7463:function(t,e,s){},8048:function(t,e,s){"use strict";var a=s("0e0b"),i=s.n(a);i.a},"85a3":function(t,e,s){},9683:function(t,e,s){},"9f33":function(t,e,s){},a2ef:function(t,e,s){},a58d:function(t,e,s){},a5da:function(t,e,s){"use strict";var a=s("d7b7"),i=s.n(a);i.a},a95b:function(t,e,s){"use strict";var a=s("9683"),i=s.n(a);i.a},c11a:function(t,e,s){},c224:function(t){t.exports=JSON.parse('{"title":"中文（中国）","loading":"加载中...","header_welcome":"欢迎使用","header_version":"PokaPlayer {version}","checkUpdate_poka":"有新版本可供更新：{version}","checkUpdate_button":"更新","pingServer_title":"提示","pingServer_content":"服务器重新启动完毕！","pingServer_reconnect":"重新连接","home":"首页","nowplaying":"现正播放","lrc":"歌词","search":"搜索","album":"专辑","folder":"文件夹","artist":"演出者","song":"歌曲","composer":"作曲者","playlist":"播放清单","settings":"设定","ok":"好","cancel":"取消","back":"返回","login":"登入","nothingFound":"找不到","requestError":"请求失败，请再试一次","home_recentAlbums":"最近加入的专辑","home_pins":"钉选","home_netease":"网易云音乐","home_hqPlaylist_netease":"精品清单","home_topPlaylist_netease":"热门清单","home_dailyRecommend_netease":"每日推荐","app_waitForPlay":"伫列中未有歌曲","app_waitForPlay_description":"加入一些歌曲，或是点选底下的随机播放","now_cleanSongs":"确定清除所有歌曲？","now_cleanSongs_description":"这将会清除列表中所有歌曲。","playlist_random":"随机播放","lrc_search":"搜索歌词","lrc_noKeyword":"尚未输入关键字","lrc_enter2search":"输入完后按下 Enter 开始搜索歌词","lrc_notLoad":"不加载歌词","lrc_notLoad_description":"点选清除目前的歌词","lrc_noLyrics":"无歌词","songAction_title":"歌曲操作","songAction_name":"歌曲名称","songAction_artist":"演出者","songAction_album":"专辑","songAction_source":"来源","songAction_like":"收藏","songAction_like_success":"已收藏「{name}」","songAction_like_failed":"收藏或取消收藏「{name}」时发生了错误","songAction_unlike":"取消收藏","songAction_unlike_success":"已取消收藏「{name}」","songAction_unlike_failed":"取消收藏「{name}」时发生了错误","songAction_rating":"评等","songAction_rating0":"清除评等","songAction_rating4song":"为「{name}」评等","songAction_rating_success":"为「{name}」评等 {star} 星成功！","songAction_rating_failed":"为「{name}」评等 {star} 星失败。","songAction_rating0_success":"为「{name}」清除评等成功！","songAction_rating0_failed":"为「{name}」清除评等失败。","songAction_add2playlist":"加入到播放清单","songAction_add2playlist_songNotExist":"{source}","songAction_add2playlist_songExist":"{source} / 该歌曲已存在，点选来删除","songAction_add2playlist_failed":"处理 {name} 时发生了错误","songAction_add2playlist_add_success":"已将 {name} 加入到 {playlist}","songAction_add2playlist_remove_success":"已将 {name} 从 {playlist} 删除","album_total":"{songs} 首歌曲","albumsOfSameArtist":"來自相同演出者的其他專輯","addSong_total":"已添加 {total} 首歌","addSong_name":"已添加 {name}","moduleShowName_Netease":"网易云音乐","moduleShowName_DSM":"DSM","sessionExpired":"Session 过期，请重新登入","add2nowPlaying":"将此页歌曲加入到现正播放","pin_failed":"钉选失败","unpin_failed":"取消钉选失败","pin_album":"钉选此专辑","unpin_album":"取消钉选此专辑","pin_artist":"钉选该演出者","unpin_artist":"取消钉选该演出者","pin_composer":"钉选该作曲者","unpin_composer":"取消钉选该作曲者","pin_playlist":"钉选此播放清单","unpin_playlist":"取消钉选此播放清单","settings_dark":"夜间模式","settings_network":"网路","settings_network_description":"音质","settings_network_soundQuality":"音质","settings_network_soundQuality_Low":"低音质","settings_network_soundQuality_Med":"中等音质","settings_network_soundQuality_High":"高音质(建议)","settings_network_soundQuality_Ori":"原始音质","settings_network_soundQuality_Low_description":"128K，跟 YouTube 差不多的烂音质，在网路夭寿慢的情况下请选择此选项","settings_network_soundQuality_Med_description":"音质只比 YouTube 好那么一点点，可在 3G 网路下流畅的串流","settings_network_soundQuality_High_description":"音质较原始音质略差，可在 4G 网路下流畅的串流","settings_network_soundQuality_Ori_description":"在网路状况许可下，可选择此选项聆听高音质音乐","settings_customize":"个人化","settings_customize_description":"自订背景、其他细节设定","settings_customize_bg":"自订背景","settings_customize_bg_link":"自订连结","settings_lang":"语言","settings_lang_description":"设定您的 PokaPlayer 语言","settings_systemAndUpdate":"系统和更新","settings_systemAndUpdate_description":"更新 PokaPlayer、重新启动","settings_about":"关于","settings_about_description":"PokaPlayer 相关信息、错误回报等","settings_about_contributions":"贡献者","settings_about_errorEeport":"错误回报","settings_account":"账号","settings_logout":"登出","settings_system":"系统","settings_update":"軟體更新","settings_update_checking4updates":"正在检查更新...","settings_update_latestVersion":"您的 PokaPlayer 已是最新版本","settings_update_update2":"更新至 {version}","settings_update_canUpdate2":"可更新至 {version}","settings_update_go2UpdatePage":"前往更新页面","settings_update_srvRestart":"服务器重新启动","settings_update_reconnect":"重新连接","settings_update_initializing":"正在初始化...","settings_update_updating":"正在更新...","settings_update_git_fetch":"初始化完成","settings_update_git_reset":"更新档下载完成","settings_update_git_api":"API 更新完成","settings_updateDialog_note":"注意：若您未开启 Docker 自动重启功能，您必须手动开启 PokaPlayer","settings_updateDialog_note_dev":"若在开发机器上进行更新，<mark>可能导致 Git 爆炸</mark>","settings_updateDialog_title":"{version} 更新日志","settings_restart":"重启","settings_restarting":"正在重启...","settings_restart_completed":"重启完成！","settings_restartDialog_title":"确定要重新启动吗？","settingUser":{"title":"使用者","description":"检视您的资料、修改密码","name":"名称","username":"使用者名称","role":"权限","password":"密码","passwordDescription":"轻触此处来更改密码","changeName":{"title":"更改名称","placeholder":"输入新的名称","result":{"success":"名称成功更改为 {name}","error":"名称更改失败"}},"changeUsername":{"title":"更改使用者名称","placeholder":"输入新的使用者名称","result":{"success":"使用者名称成功更改为 {name}，下次请用新的使用者名称来登入","error":"使用者名称更改失败"}},"changePassword":{"title":"更改密码","oldPassword":"旧密码","newPassword":"新密码","confirmPassword":"确认密码","confirmPasswordHelperText":"再输入一次您的新密码","done":"更改密码","result":{"inconsistent":"两次密码不一致","same":"密码不可与旧密码相同","success":"密码更改成功","error":"密码更改失败"}}},"source":{"DSM":"DSM","Netease2":"网易云音乐"},"install":{"title":"安装向导","next":"下一步","done":"完成","enabled":"启用","description":{"title":"说明","text":"本页面将协助您进行初始设定，使 PokaPlayer 能够连接至您的音乐服务，并开始享受音乐。<br>也可以参考 Repo 内的 <code>config-simple.json</code> 来设定，别忘了移除上头的注解！"},"note":{"title":"注意","text":"请确认这些项目已开启","docker":"已开启 Docker 自动重启功能","netease":{"title":"若您要使用网易云服务","text":"<li>请先架设好 gnehs/neteasecloudmusicapi-docker</li><li>建议可设定好容器别名以方便连接</li>"},"dsm":{"title":"若您要使用 DSM 的 Audio Station","text":"<li>已安装好并启动 Audio Station</li><li>DSM 已建立一个供 PokaPlayer 存取的账号，并建议不要给予过多的权限（请确认两步骤验证已关闭）</li>"}},"poka":{"login_password":"登入密码","admin_password":"管理员密码","please_enter_password":"请输入密码","note":"*请牢记您的密码，若不慎遗失将无法复原<br>*请设定较强的密码，像是 <code>correctcutebibibatterystaple</code> 之类由单字组成的密码"},"module":"模组","dsm":{"dsm":"DSM","connect_to_dsm":"连接到 DSM","error":"无法连线至 DSM 或账号密码有误"},"protocol":"通讯协定","host":"网域、IP 或别名","port":"端口","account":"账号","password":"密码","netease":{"netease":"网易云音乐","connect_to_netease":"连接到 NeteaseCloudMusicApi","loginby":{"title":"E-mail 或 电话号码","email":"E-mail","phone":"电话号码"},"subscription":{"title":"订阅歌单","topPlaylist":"网友精选碟歌单","dailyRecommendSongs":"每日推荐歌曲","dailyRecommendPlaylists":"每日推荐歌单","hqPlaylist":"精品歌单"},"error":"无法连线至网易云或账号密码有误"},"finish":{"title":"完成","text":"您可以在此备份目前的设定档，以备不时之需<br>点击下方「完成」来提交设定档","download_config":"下载设定档"},"state":{"done_title":"完成！","done_commit":"正在提交设定档","done_restarting":"正在等待服务器重启，请勿离开本页面","done_server_restarted":"服务器重启完成，请点击下面按钮重新载入页面","poka_title":"PokaPlayer 已安装完成","poka_description":"若要修改设定，请手动删除目录下的 config.json"}}}')},c3c9:function(t,e,s){"use strict";var a=s("5fc0"),i=s.n(a);i.a},c667:function(t,e,s){},c6ed:function(t,e,s){},cd41:function(t,e,s){},d6ed:function(t,e,s){"use strict";var a=s("3d32"),i=s.n(a);i.a},d7b7:function(t,e,s){},e1e2:function(t,e,s){},e332:function(t,e,s){},e53c:function(t,e,s){},ef87:function(t,e,s){var a,i,n;!function(s,o){"use strict";i=[],a=o,n="function"===typeof a?a.apply(e,i):a,void 0===n||(t.exports=n)}(0,(function(){"use strict";var t=function(t){this.timestamp_offset=0,this.lyrics_all=void 0,this.meta_info=void 0,this.ID_TAGS=[{name:"artist",id:"ar"},{name:"album",id:"al"},{name:"title",id:"ti"},{name:"author",id:"au"},{name:"length",id:"length"},{name:"by",id:"by"},{name:"offset",id:"offset",handler:this.setTimestampOffset},{name:"createdBy",id:"re"},{name:"createdByVersion",id:"ve"}];for(var e=0;e<this.ID_TAGS.length;e++)this.ID_TAGS[e].re=new RegExp("\\["+this.ID_TAGS[e].id+":(.*)\\]$","g");t&&this.load(t)};return t.prototype={constructor:t,load:function(t){this.lyrics_all=new Array,this.meta_info=new Object,this.timestamp_offset=0;for(var e=String(t).split("\n"),s=0;s<e.length;s++){var a=e[s].replace(/(^\s*)|(\s*$)/g,"");if(a){for(var i=!1,n=0;n<this.ID_TAGS.length;n++){var o=this.ID_TAGS[n].re.exec(a);if(o&&!(o.length<2)){i=!0;var r=o[1].replace(/(^\s*)|(\s*$)/g,"");"function"==typeof this.ID_TAGS[n].handler?this.meta_info[String(this.ID_TAGS[n].name)]=this.ID_TAGS[n].handler.call(this,r):this.meta_info[String(this.ID_TAGS[n].name)]=String(r)}}if(!i){for(var l=Array();;){o=/^(\[\d+:\d+(.\d+)?\])(.*)/g.exec(a);if(!o)break;l.push(o[1]),a=o[o.length-1].replace(/(^\s*)|(\s*$)/g,"")}for(n=0;n<l.length;n++){var d=/^\[(\d{1,2}):(\d|[0-5]\d)(\.(\d+))?\]$/g.exec(l[n]);d&&this.lyrics_all.push({timestamp:60*Number(d[1])+Number(d[2])+(d[4]?Number("0."+d[4]):0),text:a})}}}}return this.lyrics_all.sort((function(t,e){return t.timestamp>e.timestamp?1:-1})),this.lyrics_all.length||(this.lyrics_all=void 0),this.isEmpty(this.meta_info)&&(this.meta_info=void 0),void 0!==this.lyrics_all||void 0!==this.meta_info},getLyrics:function(){return this.lyrics_all},getLyric:function(t){try{return this.lyrics_all[t]}catch(t){return}},getIDTags:function(){return this.meta_info},select:function(t){if(isNaN(t))return-1;var e=Number(t)+this.timestamp_offset,s=0;if(e<this.lyrics_all[0].timestamp)return-1;for(s=0;s<this.lyrics_all.length-1&&!(this.lyrics_all[s].timestamp<=e&&this.lyrics_all[s+1].timestamp>e);s++);return s},setTimestampOffset:function(t){return this.timestamp_offset=isNaN(t)?0:Number(t)/1e3,Number(t)},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}},t}))},f1f4:function(t,e,s){},f82c:function(t,e,s){}});
//# sourceMappingURL=app.1a7c9fee.js.map
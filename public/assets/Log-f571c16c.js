import{a as h}from"./index-b5081660.js";import{_ as B,j as x,i as o,k as I,r as P,o as u,c as b,e as f,b as m,t as y,T as C,s as E,F as j}from"./index-dca75ef4.js";const A={__name:"Log",setup(D){const _=x("PokaAPI"),t=o(""),L=o(0),g=o(!1),a=o([]);async function p(){let e=await _.getUserList();a.value=e}async function v(e=0){var s;(!a.value||!a.value.length)&&await p();let n=await _.getLog(e);for(let{level:k,type:w,event:$,user:l,description:c,time:i}of n)l=((s=a.value.find(r=>r._id==l))==null?void 0:s.username)||l,i=new Date(i).toLocaleString(),a.value.map(r=>{c=c.replace(new RegExp(`{${r._id}}`,"g"),r.username)}),t.value+=`[${k}] ${w} / ${$}
`,t.value+=`  ðŸ“„ ${c}
`,t.value+=`  ðŸ‘¤ ${l}
`,t.value+=`  ðŸ•’ ${i}
`,t.value+=`
`;n.length||(g.value=!0)}const d=o(null);return h(d,async([{isIntersecting:e}],n)=>{e&&await v(L.value++)},{threshold:.5,rootMargin:"0px"}),I(async()=>{await p(),await v()}),(e,n)=>{const s=P("Loader");return u(),b(j,null,[(u(),f(C,{to:"#header-center"},[m("p",null,y(e.$t("settings.log.title")),1)])),m("pre",{class:"log",ref:"logContainer"},y(t.value),513),g.value?E("",!0):(u(),f(s,{key:0,ref_key:"logBottom",ref:d},null,512))],64)}}},N=B(A,[["__scopeId","data-v-e00d7f52"]]);export{N as default};
